{"version":3,"file":"main.css","mappings":"AAwQA,sDACE,iDACF,CACA,yCACE,cAAe,CACf,gCAAkC,CAClC,eACF,CACA,+BACE,uBAAwB,CACxB,WACF,CAEA,iCACE,gCACF,CACA,8BACE,cACF;;AAIA,8BACE,eAAgB,CAChB,eAAgB,CAChB,iBAAkB,CAClB,gBAAiB,CACjB,0DAA+D,CAC/D,iCACF,CACA,iCACE,aAAc,CACd,sBAAuB,CACvB,oBACF,CACA,iCACE,aAAc,CACd,sBAAuB,CACvB,oBACF;;ACvGA,kCACE,YAAa,CACb,qBAAsB,CACtB,QACF,CAEA,gCACE,iCAAkC,CAClC,YAAa,CACb,iBAAkB,CAClB,uCACF,CAEA,8BACE,gBAAiB,CACjB,uBAAwB,CACxB,WAAY,CACZ,iBACF,CAEA,6BACE,aAAc,CACd,gBAAiB,CACjB,wBACF,CAGA,qCACE,iCAAkC,CAClC,YAAa,CACb,iBAAkB,CAClB,uCACF,CAEA,kCACE,YAAa,CACb,6BAA8B,CAC9B,iBAAkB,CAClB,eAAgB,CAChB,uBACF,CAEA,gCACE,wBAAyB,CACzB,gBACF,CAEA,iCACE,UAAW,CACX,+BAAgC,CAChC,iBAAkB,CAClB,eACF,CAEA,gCACE,WAAY,CACZ,wEAA2E,CAC3E,iBAAkB,CAClB,0BACF,CAEA,gEAEE,cACF,CAEA,4DAEE,gBAAiB,CACjB,WACF,CAEA,mCACE,cAAe,CACf,eAAgB,CAChB,uBAAwB,CACxB,WACF,CAEA,0DAEE,cAAe,CACf,WAAY,CACZ,+BAAgC,CAChC,iBACF,CAGA,4BACE,YAAa,CACb,sBAAuB,CACvB,QAAS,CACT,gBAAiB,CACjB,8CAAkD,CAClD,wBACF,CAEA,uCACE,kBACF,CAEA,kCACE,uBAAwB,CACxB,WAAY,CACZ,sBACF,CAEA,sCACE,qCACF,CAEA,gCACE,UAAW,CACX,WAAY,CACZ,aAAc,CACd,cACF,CAEA,6BACE,UAAW,CACX,WAAY,CACZ,wBACF,CAEA,mCACE,oBAAqB,CACrB,wBAAyB,CACzB,WACF,CAEA,+BACE,MAAO,CACP,YAAa,CACb,qBAAsB,CACtB,OACF,CAEA,4BACE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2CAA+C,CAC/C,8CACF,CAEA,WACE,YAAa,CACb,OACF,CAEA,eACE,mCACF,CAEA,WACE,mCACF,CAEA,YACE,mCACF,CAEA,gBACE,YAAa,CACb,mCAAqC,CACrC,OACF,CAEA,WACE,iCAAkC,CAClC,eAAgB,CAChB,iBAAkB,CAClB,iBAAkB,CAClB,uCAA2C,CAC3C,sCAAuC,CACvC,eAAgB,CAChB,YAAa,CACb,qBAAsB,CACtB,sBACF,CAEA,iBACE,gCAAiC,CACjC,wCACF,CAEA,qBACE,gCAAiC,CACjC,gCAAiC,CACjC,0CACF,CAEA,qBACE,+BAAgC,CAChC,sCACF,CAEA,kCACE,wBACF,CAEA,oBACE,gCAAiC,CACjC,sCACF,CAEA,gCACE,yBACF,CAEA,aACE,eAAgB,CAChB,gBAAiB,CACjB,wBAAyB,CACzB,iBACF,CAEA,YACE,gBAAiB,CACjB,wBAAyB,CACzB,iBAAkB,CAClB,kBAAmB,CACnB,eAAgB,CAChB,sBACF,CAEA,eACE,eAAgB,CAChB,uBAAwB,CACxB,WAAY,CACZ,kBAAmB,CACnB,eAAgB,CAChB,sBACF,CAEA,gBACE,iCAAkC,CAClC,gBAAiB,CACjB,iBAAkB,CAClB,iBAAkB,CAClB,uCAA2C,CAC3C,WAAY,CACZ,sCACF,CAEA,yBACE,SAAU,CACV,kBAAmB,CACnB,gCAAiC,CACjC,gCACF,CAEA,gBACE,eAAgB,CAChB,iBACF,CAEA,gBACE,gBAAiB,CACjB,gBAAiB,CACjB,uBAAwB,CACxB,iBACF,CAEA,kBACE,eAAgB,CAChB,uBACF,CAEA,2CACE,yBACF,CAGA,yBACE,eACE,mCACF,CAEA,WACE,mCACF,CAEA,YACE,mCACF,CAEA,gBACE,mCACF,CAEA,WACE,eAAgB,CAChB,eACF,CAEA,aACE,gBACF,CAEA,eACE,gBACF,CACF,CAEA,yBACE,YACE,mCACF,CAEA,gBACE,mCACF,CACF","sources":["src://tavern_helper_template/src/å¯’å†¬æœ«æ—¥/ç•Œé¢/çŠ¶æ€æ /components/CharactersSection.vue","src://tavern_helper_template/src/å¯’å†¬æœ«æ—¥/ç•Œé¢/çŠ¶æ€æ /components/MissionSection.vue","src://tavern_helper_template/src/å¯’å†¬æœ«æ—¥/ç•Œé¢/çŠ¶æ€æ /components/ShelterSection.vue","src://tavern_helper_template/src/å¯’å†¬æœ«æ—¥/ç•Œé¢/çŠ¶æ€æ /components/StorySection.vue","src://tavern_helper_template/src/å¯’å†¬æœ«æ—¥/ç•Œé¢/çŠ¶æ€æ /global.css"],"sourcesContent":["<template>\n  <section id=\"characters-section\" class=\"section\">\n    <h2 class=\"section-title\">ğŸ‘¤ ç™»åœºè§’è‰² ğŸ‘¤</h2>\n    <div class=\"status-tabs-container\">\n      <template v-if=\"active_character_keys.length > 0\">\n        <div class=\"tab-buttons\">\n          <button\n            v-for=\"key in active_character_keys\"\n            :key=\"key\"\n            class=\"tab-button\"\n            :class=\"{ active: active_character_key === key }\"\n            type=\"button\"\n            @click=\"setActiveCharacter(key)\"\n          >\n            {{ getCharacterDisplayName(key) }}\n            <span class=\"status-pill\" :class=\"getCharacterStatus(key)\">{{ getCharacterStatus(key) }}</span>\n          </button>\n        </div>\n\n        <div\n          v-for=\"key in active_character_keys\"\n          v-show=\"active_character_key === key\"\n          :key=\"`${key}:tab`\"\n          class=\"tab-content\"\n          :class=\"{ active: active_character_key === key }\"\n        >\n          <div class=\"status-grid\">\n            <div class=\"status-item health-section\">\n              <div class=\"health-section-header\">\n                <div class=\"label\">â¤ï¸ å¥åº·</div>\n                <div class=\"value\">{{ getCharacter(key)?.å¥åº· ?? '--' }}</div>\n              </div>\n              <div class=\"health-status-subtext\">{{ getCharacter(key)?.å¥åº·çŠ¶å†µ ?? '--' }}</div>\n              <div class=\"progress-bar-container\">\n                <div class=\"progress-bar-value\" :style=\"{ width: `${healthPercent(key)}%` }\"></div>\n              </div>\n              <div class=\"value-subtext\">{{ getCharacterChange(key) }}</div>\n            </div>\n\n            <div class=\"status-item imprint-section\">\n              <div class=\"health-section-header\">\n                <div class=\"label\">ğŸ”± ç§©åºåˆ»å°</div>\n                <div class=\"value\">{{ getCharacter(key)?.ç§©åºåˆ»å° ?? '--' }}</div>\n              </div>\n              <div class=\"imprint-status-subtext\">\n                {{ getRelationStage(key) }} Â· å…³ç³»å€¾å‘ï¼š{{ getRelationTendency(key) }}\n              </div>\n              <div class=\"progress-bar-container imprint-bar\">\n                <div class=\"progress-bar-value\" :style=\"{ width: `${imprintPercent(key)}%` }\"></div>\n              </div>\n              <div class=\"value-subtext imprint-change\">\n                {{ getImprintChange(key) || ' ' }}\n              </div>\n              <div class=\"value-subtext imprint-hint\">\n                åŒºé—´ï¼š{{ getRelationRangeText(key) }}ï½œæ•°å€¼è¶Šé«˜è¡¨ç¤ºæ›´æ·±çš„ç§©åºç»‘å®š\n              </div>\n            </div>\n\n            <div class=\"details-grid\">\n              <div class=\"status-item\">\n                <div class=\"label\">ğŸ‘š è¡£ç€</div>\n                <div class=\"value\">{{ getCharacter(key)?.è¡£ç€ ?? '--' }}</div>\n              </div>\n              <div class=\"status-item\">\n                <div class=\"label\">ğŸ‘… èˆŒå”‡</div>\n                <div class=\"value\">{{ getCharacter(key)?.èˆŒå”‡ ?? '--' }}</div>\n              </div>\n              <div class=\"status-item\">\n                <div class=\"label\">ğŸˆ èƒ¸ä¹³</div>\n                <div class=\"value\">{{ getCharacter(key)?.èƒ¸ä¹³ ?? '--' }}</div>\n              </div>\n              <div class=\"status-item\">\n                <div class=\"label\">ğŸŒ¸ ç§ç©´</div>\n                <div class=\"value\">{{ getCharacter(key)?.ç§ç©´ ?? '--' }}</div>\n              </div>\n              <div class=\"status-item\">\n                <div class=\"label\">ğŸ˜Š ç¥æ€æ ·è²Œ</div>\n                <div class=\"value\">{{ getCharacter(key)?.ç¥æ€æ ·è²Œ ?? '--' }}</div>\n              </div>\n              <div class=\"status-item\">\n                <div class=\"label\">ğŸ’ƒ åŠ¨ä½œå§¿åŠ¿</div>\n                <div class=\"value\">{{ getCharacter(key)?.åŠ¨ä½œå§¿åŠ¿ ?? '--' }}</div>\n              </div>\n            </div>\n\n            <div class=\"status-item\">\n              <div class=\"label\">ğŸ’­ å†…å¿ƒæƒ³æ³•</div>\n              <div class=\"value thought-text\">{{ getCharacter(key)?.å†…å¿ƒæƒ³æ³• ?? '--' }}</div>\n            </div>\n          </div>\n        </div>\n      </template>\n\n      <template v-else>\n        <div class=\"content-text\">æš‚æ— ç™»åœºè§’è‰²</div>\n      </template>\n    </div>\n  </section>\n</template>\n\n<script setup lang=\"ts\">\nimport _ from 'lodash';\nimport type { Schema as SchemaType } from '../../../schema';\nimport { useDataStore } from '../../store';\n\n// æ‰©å±• CharacterKey ä»¥åŒ…å«ä¸´æ—¶ NPC çš„ key (æ ¼å¼: \"ä¸´æ—¶NPC:å§“å\")\ntype CharacterKey =\n  | Exclude<keyof SchemaType, 'ä¸–ç•Œ' | 'åº‡æŠ¤æ‰€' | 'æ¥¼å±‚å…¶ä»–ä½æˆ·' | 'æˆ¿é—´' | 'ä¸»çº¿ä»»åŠ¡' | 'ä¸´æ—¶NPC'>\n  | string;\n\nconst CHARACTER_ORDER = [\n  'æµ…è§äºšç¾',\n  'ç›¸ç”°å“²ä¹Ÿ',\n  'æ˜Ÿé‡ç‰ç’ƒ',\n  'æ—©å·é¥',\n  'æ—©å·èˆ',\n  'è—¤äº•é›ªä¹ƒ',\n  'ä¸­æ‘æƒ å­',\n  'çˆ±å®«å¿ƒçˆ±',\n  'çˆ±å®«é“ƒ',\n  'æ¡ƒä¹ä¸ãƒ»æ³½å·´å“ˆ',\n  'ä½•é“ƒ',\n  'ç‹é™',\n  'åº·ç»®æœˆ',\n  'è–›è',\n  'å°æ³½èŠ±',\n] as const;\n\nconst store = useDataStore();\n\nconst active_character_keys = computed<CharacterKey[]>(() => {\n  const keys: CharacterKey[] = [];\n\n  const isActive = (key: CharacterKey) => getCharacter(key)?.ç™»åœºçŠ¶æ€ === 'ç™»åœº';\n\n  // 1. é¢„è®¾è§’è‰²æŒ‰å›ºå®šé¡ºåºï¼šå…ˆç™»åœºåç¦»åœº\n  const presetKeys = CHARACTER_ORDER.filter(key => store.data[key as keyof typeof store.data]);\n  const presetActive = presetKeys.filter(isActive);\n  const presetInactive = presetKeys.filter(k => !isActive(k));\n  keys.push(...presetActive, ...presetInactive);\n\n  // 2. ä¸´æ—¶ NPCï¼šå…ˆç™»åœºåç¦»åœºï¼ˆæŒ‰åç§°å­—å…¸åºï¼‰\n  const tempNPCs = store.data.ä¸´æ—¶NPC;\n  if (tempNPCs && typeof tempNPCs === 'object') {\n    const npcNames = Object.keys(tempNPCs).sort();\n    const npcActive = npcNames.filter(name => isActive(`ä¸´æ—¶NPC:${name}`));\n    const npcInactive = npcNames.filter(name => !isActive(`ä¸´æ—¶NPC:${name}`));\n    npcActive.forEach(name => keys.push(`ä¸´æ—¶NPC:${name}`));\n    npcInactive.forEach(name => keys.push(`ä¸´æ—¶NPC:${name}`));\n  }\n\n  return keys;\n});\n\nconst active_character_key = ref<CharacterKey | null>(null);\n\nwatch(\n  active_character_keys,\n  keys => {\n    if (keys.length === 0) {\n      active_character_key.value = null;\n      return;\n    }\n\n    if (!active_character_key.value || !keys.includes(active_character_key.value)) {\n      active_character_key.value = keys[0];\n    }\n  },\n  { immediate: true },\n);\n\nfunction getCharacter(key: CharacterKey) {\n  // æŸäº›è½¬è¯‘æµä¼šæŠŠæ—¥æ–‡ä¸­ç‚¹æ›¿æ¢æˆå ä½ç¬¦ã€Œ?ã€ï¼ŒæŸ¥æ‰¾å‰å…ˆè¿˜åŸ\n  const normalizedKey = typeof key === 'string' ? key.replace(/\\?/g, 'ãƒ»') : key;\n\n  if (typeof key === 'string' && key.startsWith('ä¸´æ—¶NPC:')) {\n    const realName = key.split(':')[1];\n    return store.data.ä¸´æ—¶NPC[realName];\n  }\n  return store.data[normalizedKey as keyof typeof store.data] as any;\n}\n\nfunction getCharacterChange(key: CharacterKey) {\n  const char = getCharacter(key);\n  if (!char || !char.å¥åº·æ›´æ–°åŸå› ) return '';\n  return char.å¥åº·æ›´æ–°åŸå› ;\n}\n\nfunction getCharacterDisplayName(key: CharacterKey) {\n  const char = getCharacter(key);\n  const name = typeof char?.å§“å === 'string' ? char.å§“å.trim() : '';\n  // å¦‚æœæ˜¯ä¸´æ—¶NPCï¼Œå»æ‰å‰ç¼€æ˜¾ç¤º\n  if (typeof key === 'string' && key.startsWith('ä¸´æ—¶NPC:')) {\n    return key.split(':')[1];\n  }\n  return name ? name : key;\n}\n\nfunction getCharacterStatus(key: CharacterKey) {\n  const char = getCharacter(key);\n  return char?.ç™»åœºçŠ¶æ€ ?? 'ç¦»åœº';\n}\n\nfunction setActiveCharacter(key: CharacterKey) {\n  active_character_key.value = key;\n}\n\nfunction healthPercent(key: CharacterKey) {\n  const char = getCharacter(key);\n  const health = char?.å¥åº·;\n  if (typeof health !== 'number') return 0;\n  return _.clamp(health, 0, 100);\n}\n\nfunction imprintPercent(key: CharacterKey) {\n  const char = getCharacter(key);\n  const mark = char?.ç§©åºåˆ»å°;\n  if (typeof mark !== 'number') return 0;\n  return _.clamp(mark, 0, 100);\n}\n\nfunction getRelationStage(key: CharacterKey) {\n  const char = getCharacter(key);\n  if (char?.å…³ç³») return char.å…³ç³»;\n  // fallback: æ¨æ–­è‡ªç§©åºåˆ»å°æ•°å€¼\n  const mark = typeof char?.ç§©åºåˆ»å° === 'number' ? char.ç§©åºåˆ»å° : null;\n  if (mark === null) return 'æœªçŸ¥';\n  if (mark < 20) return 'æ‹’ç»';\n  if (mark < 40) return 'äº¤æ˜“';\n  if (mark < 60) return 'é¡ºä»';\n  if (mark < 90) return 'å¿ è¯š';\n  return 'æ€§å¥´';\n}\n\nfunction getRelationTendency(key: CharacterKey) {\n  const char = getCharacter(key);\n  return char?.å…³ç³»å€¾å‘ ?? 'æœªçŸ¥';\n}\n\nfunction getRelationRangeText(key: CharacterKey) {\n  const relation = getRelationStage(key);\n  switch (relation) {\n    case 'æ‹’ç»':\n      return '0 - 19';\n    case 'äº¤æ˜“':\n      return '20 - 39';\n    case 'é¡ºä»':\n      return '40 - 59';\n    case 'å¿ è¯š':\n      return '60 - 89';\n    case 'æ€§å¥´':\n      return '90 - 100';\n    default:\n      return '0 - 100';\n  }\n}\n\nfunction getImprintChange(key: CharacterKey) {\n  const char = getCharacter(key);\n  return char?.ç§©åºåˆ»å°æ›´æ–°åŸå›  ?? '';\n}\n</script>\n\n<style scoped>\n.imprint-section .progress-bar-value {\n  background: linear-gradient(90deg, #7aa2f7, #f1fa8c);\n}\n.imprint-status-subtext {\n  margin-top: 4px;\n  color: var(--accent-blue, #8be9fd);\n  font-size: 0.9em;\n}\n.imprint-hint {\n  color: var(--text-color);\n  opacity: 0.7;\n}\n\n.imprint-change {\n  color: var(--accent-gold, #f1fa8c);\n}\n.imprint-bar {\n  margin-top: 6px;\n}\n</style>\n\n<style scoped>\n.status-pill {\n  margin-left: 8px;\n  padding: 2px 6px;\n  border-radius: 6px;\n  font-size: 0.75em;\n  border: 1px solid var(--border-color, rgba(255, 255, 255, 0.2));\n  background: rgba(255, 255, 255, 0.05);\n}\n.status-pill.ç™»åœº {\n  color: #50fa7b;\n  border-color: #50fa7b55;\n  background: #50fa7b11;\n}\n.status-pill.ç¦»åœº {\n  color: #f1fa8c;\n  border-color: #f1fa8c55;\n  background: #f1fa8c11;\n}\n</style>\n","<template>\n  <section id=\"mission-section\" class=\"section\">\n    <h2 class=\"section-title\">ğŸ“œ ä¸»çº¿ä»»åŠ¡ ğŸ“œ</h2>\n    <div class=\"mission-content\">\n      <!-- å½“å‰é˜¶æ®µ -->\n      <div class=\"mission-phase\">\n        <div class=\"phase-label\">ğŸ“ å½“å‰é˜¶æ®µ</div>\n        <div class=\"phase-name\">{{ store.data.ä¸»çº¿ä»»åŠ¡.å½“å‰é˜¶æ®µ }}</div>\n      </div>\n\n      <!-- é˜¶æ®µç›®æ ‡è¿›åº¦æ¡ -->\n      <div class=\"goals-progress-bar\">\n        <div class=\"progress-header\">\n          <span>ğŸ¯ é˜¶æ®µç›®æ ‡è¿›åº¦</span>\n          <span class=\"progress-text\">{{ completedGoals }}/{{ stageTargets.length }}</span>\n        </div>\n        <div class=\"progress-track\">\n          <div class=\"progress-fill\" :style=\"{ width: progressPercent + '%' }\"></div>\n        </div>\n      </div>\n\n      <!-- é˜¶æ®µç›®æ ‡ -->\n      <div class=\"mission-goals\">\n        <button class=\"collapse-toggle-btn\" @click=\"isGoalsExpanded = !isGoalsExpanded\">\n          <span class=\"toggle-icon\">{{ isGoalsExpanded ? 'â–¼' : 'â–¶' }}</span>\n          <span class=\"toggle-text\">ğŸ“‹ ç›®æ ‡æ¸…å•</span>\n          <span class=\"goals-count\">({{ completedGoals }}/{{ store.data.ä¸»çº¿ä»»åŠ¡.é˜¶æ®µç›®æ ‡.length }})</span>\n        </button>\n        <div v-show=\"isGoalsExpanded\" class=\"goals-list\">\n          <template v-if=\"stageTargets.length > 0\">\n            <div\n              v-for=\"(goal, idx) in stageTargets\"\n              :key=\"goal.key || idx\"\n              class=\"goal-item\"\n              :class=\"{ completed: isGoalCompleted(goal.key, idx) }\"\n            >\n              <div class=\"goal-checkbox\">\n                <svg v-if=\"isGoalCompleted(goal.key, idx)\" viewBox=\"0 0 24 24\" class=\"check-icon\">\n                  <path d=\"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z\" />\n                </svg>\n                <svg v-else viewBox=\"0 0 24 24\" class=\"check-icon empty\">\n                  <circle cx=\"12\" cy=\"12\" r=\"10\" />\n                </svg>\n              </div>\n              <div class=\"goal-content\">\n                <div class=\"goal-text\" :class=\"{ completed: isGoalCompleted(goal.key, idx) }\">\n                  {{ getGoalText(goal) }}\n                </div>\n                <div class=\"goal-meta\" v-if=\"hasGoalProgress(goal)\">\n                  <span class=\"meta-chip\">è¿›åº¦ï¼š{{ goal.å½“å‰å€¼ ?? 0 }}/{{ goal.ç›®æ ‡å€¼ ?? 0 }}</span>\n                </div>\n                <span v-if=\"isGoalCompleted(goal.key, idx)\" class=\"goal-status-tag\">å·²å®Œæˆ</span>\n              </div>\n            </div>\n          </template>\n          <template v-else>\n            <div class=\"goal-item empty\">(æš‚æ— ç›®æ ‡)</div>\n          </template>\n        </div>\n      </div>\n\n      <!-- æƒ…æŠ¥ç¢ç‰‡ -->\n      <div class=\"mission-intel\">\n        <button class=\"collapse-toggle-btn\" @click=\"isIntelExpanded = !isIntelExpanded\">\n          <span class=\"toggle-icon\">{{ isIntelExpanded ? 'â–¼' : 'â–¶' }}</span>\n          <span class=\"toggle-text\">ğŸ” æƒ…æŠ¥ç¢ç‰‡</span>\n          <span class=\"intel-count\">({{ intelCompleted }}/{{ intelTotal }})</span>\n        </button>\n        <div v-if=\"intelTotal === 0\" class=\"intel-empty-hint\">æš‚æ— æƒ…æŠ¥ç¢ç‰‡ï¼Œç»§ç»­æ¢ç´¢/æœåˆ®å¯è§£é”æ–°çš„çº¿ç´¢ã€‚</div>\n        <div v-show=\"isIntelExpanded\" class=\"intel-list\">\n          <template v-if=\"intelTotal > 0\">\n            <div v-for=\"(intel, key) in store.data.ä¸»çº¿ä»»åŠ¡.æƒ…æŠ¥ç¢ç‰‡\" :key=\"key\" class=\"intel-item\" :class=\"intel.çŠ¶æ€\">\n              <div class=\"intel-status-ring\" :class=\"intel.çŠ¶æ€\">\n                <svg viewBox=\"0 0 36 36\" class=\"progress-ring\">\n                  <circle cx=\"18\" cy=\"18\" r=\"16\" class=\"ring-bg\" />\n                  <circle\n                    cx=\"18\"\n                    cy=\"18\"\n                    r=\"16\"\n                    class=\"ring-progress\"\n                    :stroke-dasharray=\"getRingProgress(intel.çŠ¶æ€)\"\n                    :class=\"intel.çŠ¶æ€\"\n                  />\n                </svg>\n                <span class=\"ring-icon\">{{ getStatusIcon(intel.çŠ¶æ€) }}</span>\n              </div>\n              <div class=\"intel-content\">\n                <div class=\"intel-header\">\n                  <span class=\"intel-id\">{{ intel.ç¼–å· }}</span>\n                  <span class=\"intel-status-badge\" :class=\"intel.çŠ¶æ€\">{{ intel.çŠ¶æ€ }}</span>\n                </div>\n                <div class=\"intel-desc\">{{ intel.æè¿° }}</div>\n                <div class=\"intel-meta\">\n                  <span class=\"intel-value\">ğŸ’° {{ intel.ä»·å€¼ }}</span>\n                  <span class=\"intel-risk\">âš ï¸ {{ intel.é£é™© }}</span>\n                </div>\n              </div>\n            </div>\n          </template>\n          <template v-else>\n            <div class=\"intel-item empty\">(æš‚æ— æƒ…æŠ¥ç¢ç‰‡)</div>\n          </template>\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed } from 'vue';\nimport { useDataStore } from '../../store';\n\nconst store = useDataStore();\nconst isGoalsExpanded = ref(false);\nconst isIntelExpanded = ref(false);\n\ntype StageTarget = { key: string; æè¿°: string; å½“å‰å€¼: number; ç›®æ ‡å€¼: number };\nconst stageTargets = computed<StageTarget[]>(() => {\n  const raw = store.data.ä¸»çº¿ä»»åŠ¡.é˜¶æ®µç›®æ ‡ as any;\n  if (Array.isArray(raw)) {\n    return (raw as any[]).map((t, idx) => ({\n      key: String(idx),\n      æè¿°: t?.æè¿° ?? '',\n      å½“å‰å€¼: Number(t?.å½“å‰å€¼ ?? 0),\n      ç›®æ ‡å€¼: Number(t?.ç›®æ ‡å€¼ ?? 0),\n    }));\n  }\n  return Object.entries(raw ?? {}).map(([key, t]) => ({\n    key,\n    æè¿°: (t as any)?.æè¿° ?? key,\n    å½“å‰å€¼: Number((t as any)?.å½“å‰å€¼ ?? 0),\n    ç›®æ ‡å€¼: Number((t as any)?.ç›®æ ‡å€¼ ?? 0),\n  }));\n});\n\nconst completedGoals = computed(() => stageTargets.value.filter((g, idx) => isGoalCompleted(g.key, idx)).length);\n\nconst progressPercent = computed(() => {\n  const total = stageTargets.value.length;\n  if (total === 0) return 0;\n  return Math.round((completedGoals.value / total) * 100);\n});\n\nfunction isGoalCompleted(goalKey: string, idx: number): boolean {\n  const status = store.data.ä¸»çº¿ä»»åŠ¡.ç›®æ ‡å®ŒæˆçŠ¶æ€ ?? {};\n  if (goalKey in status) return status[goalKey] === true;\n  const fallbackKey = String(idx);\n  return status[fallbackKey] === true;\n}\n\nfunction getGoalText(goal: any): string {\n  if (!goal) return '';\n  if (typeof goal === 'string') return goal;\n  if (typeof goal === 'object' && 'æè¿°' in goal) return goal.æè¿° as string;\n  return String(goal);\n}\n\nfunction hasGoalProgress(goal: any): boolean {\n  return goal && typeof goal === 'object' && goal.å½“å‰å€¼ !== undefined && goal.ç›®æ ‡å€¼ !== undefined;\n}\n\n// æƒ…æŠ¥ç¢ç‰‡ç»Ÿè®¡\nconst intelTotal = computed(() => Object.keys(store.data.ä¸»çº¿ä»»åŠ¡.æƒ…æŠ¥ç¢ç‰‡).length);\nconst intelCompleted = computed(\n  () => Object.values(store.data.ä¸»çº¿ä»»åŠ¡.æƒ…æŠ¥ç¢ç‰‡).filter(i => i.çŠ¶æ€ === 'å·²å®Œæˆ').length,\n);\n\nfunction getStatusIcon(status: string): string {\n  switch (status) {\n    case 'å·²å®Œæˆ':\n      return 'âœ“';\n    case 'å·²æ¢ç´¢':\n      return 'â—';\n    case 'æœªæ¢ç´¢':\n      return 'â—‹';\n    default:\n      return 'â—‹';\n  }\n}\n\nfunction getRingProgress(status: string): string {\n  let progress = 33;\n  switch (status) {\n    case 'å·²å®Œæˆ':\n      progress = 100;\n      break;\n    case 'å·²æ¢ç´¢':\n      progress = 66;\n      break;\n    case 'æœªæ¢ç´¢':\n      progress = 33;\n      break;\n  }\n  const circumference = 2 * Math.PI * 16;\n  const offset = circumference - (progress / 100) * circumference;\n  return `${progress} ${circumference} ${offset}`;\n}\n</script>\n\n<style scoped>\n.mission-content {\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n}\n\n.mission-phase {\n  background-color: var(--bg-medium);\n  padding: 12px;\n  border-radius: 8px;\n  border: 1px solid rgba(255, 255, 255, 0.05);\n}\n\n.phase-label {\n  font-size: 0.85em;\n  color: var(--text-color);\n  opacity: 0.8;\n  margin-bottom: 6px;\n}\n\n.phase-name {\n  font-size: 1em;\n  font-weight: bold;\n  color: var(--accent-gold);\n}\n\n/* è¿›åº¦æ¡ */\n.goals-progress-bar {\n  background-color: var(--bg-medium);\n  padding: 12px;\n  border-radius: 8px;\n  border: 1px solid rgba(255, 255, 255, 0.05);\n}\n\n.progress-header {\n  display: flex;\n  justify-content: space-between;\n  margin-bottom: 8px;\n  font-size: 0.9em;\n  color: var(--text-color);\n}\n\n.progress-text {\n  color: var(--accent-gold);\n  font-weight: bold;\n}\n\n.progress-track {\n  height: 8px;\n  background-color: var(--bg-dark);\n  border-radius: 4px;\n  overflow: hidden;\n}\n\n.progress-fill {\n  height: 100%;\n  background: linear-gradient(90deg, var(--dialog-color), var(--accent-gold));\n  border-radius: 4px;\n  transition: width 0.3s ease;\n}\n\n.mission-goals,\n.mission-intel {\n  margin-top: 4px;\n}\n\n.goals-count,\n.intel-count {\n  font-size: 0.85em;\n  opacity: 0.7;\n}\n\n.intel-empty-hint {\n  margin-top: 6px;\n  font-size: 0.8em;\n  color: var(--text-color);\n  opacity: 0.7;\n}\n\n.goals-list,\n.intel-list {\n  margin-top: 8px;\n  padding: 8px;\n  background-color: var(--bg-dark);\n  border-radius: 8px;\n}\n\n/* ç›®æ ‡æ¸…å• */\n.goal-item {\n  display: flex;\n  align-items: flex-start;\n  gap: 10px;\n  padding: 10px 8px;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.05);\n  transition: all 0.2s ease;\n}\n\n.goal-item:last-child {\n  border-bottom: none;\n}\n\n.goal-item.empty {\n  color: var(--text-color);\n  opacity: 0.6;\n  justify-content: center;\n}\n\n.goal-item.completed {\n  background-color: rgba(80, 250, 123, 0.1);\n}\n\n.goal-checkbox {\n  width: 22px;\n  height: 22px;\n  flex-shrink: 0;\n  margin-top: 1px;\n}\n\n.check-icon {\n  width: 100%;\n  height: 100%;\n  fill: var(--dialog-color);\n}\n\n.check-icon.empty {\n  fill: var(--bg-light);\n  stroke: var(--text-color);\n  opacity: 0.5;\n}\n\n.goal-content {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n}\n\n.goal-text {\n  font-size: 0.9em;\n  color: var(--text-color);\n  line-height: 1.4;\n  transition: all 0.2s ease;\n}\n\n.goal-meta {\n  display: flex;\n  gap: 6px;\n  flex-wrap: wrap;\n}\n\n.meta-chip {\n  font-size: 0.75em;\n  padding: 2px 6px;\n  border-radius: 6px;\n  background: rgba(255, 255, 255, 0.08);\n  color: var(--accent-blue);\n  border: 1px solid rgba(255, 255, 255, 0.08);\n}\n\n.goal-text.completed {\n  opacity: 0.6;\n  text-decoration: line-through;\n}\n\n.goal-status-tag {\n  font-size: 0.7em;\n  padding: 2px 6px;\n  border-radius: 4px;\n  background-color: var(--dialog-color);\n  color: var(--bg-dark);\n  font-weight: bold;\n}\n\n/* æƒ…æŠ¥ç¢ç‰‡ */\n.intel-item {\n  display: flex;\n  align-items: flex-start;\n  gap: 12px;\n  background-color: var(--bg-medium);\n  padding: 12px;\n  border-radius: 8px;\n  margin-bottom: 8px;\n  border-left: 3px solid transparent;\n  transition: all 0.2s ease;\n}\n\n.intel-item:last-child {\n  margin-bottom: 0;\n}\n\n.intel-item.empty {\n  text-align: center;\n  color: var(--text-color);\n  opacity: 0.6;\n  padding: 16px;\n  justify-content: center;\n  border-left: none;\n}\n\n.intel-item.å·²å®Œæˆ {\n  border-left-color: var(--dialog-color);\n  background-color: rgba(80, 250, 123, 0.08);\n}\n\n.intel-item.å·²æ¢ç´¢ {\n  border-left-color: var(--accent-blue);\n  background-color: rgba(189, 147, 249, 0.08);\n}\n\n.intel-item.æœªæ¢ç´¢ {\n  border-left-color: var(--text-color);\n  opacity: 0.7;\n}\n\n/* è¿›åº¦ç¯ */\n.intel-status-ring {\n  width: 36px;\n  height: 36px;\n  flex-shrink: 0;\n  position: relative;\n}\n\n.progress-ring {\n  width: 100%;\n  height: 100%;\n  transform: rotate(-90deg);\n}\n\n.ring-bg {\n  fill: none;\n  stroke: var(--bg-dark);\n  stroke-width: 2;\n}\n\n.ring-progress {\n  fill: none;\n  stroke-width: 2;\n  stroke-linecap: round;\n  transition: stroke-dasharray 0.3s ease;\n}\n\n.ring-progress.å·²å®Œæˆ {\n  stroke: var(--dialog-color);\n}\n\n.ring-progress.å·²æ¢ç´¢ {\n  stroke: var(--accent-blue);\n}\n\n.ring-progress.æœªæ¢ç´¢ {\n  stroke: var(--text-color);\n  opacity: 0.5;\n}\n\n.ring-icon {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  font-size: 0.75em;\n  font-weight: bold;\n}\n\n.intel-content {\n  flex: 1;\n  min-width: 0;\n}\n\n.intel-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 6px;\n}\n\n.intel-id {\n  font-weight: bold;\n  color: var(--accent-gold);\n  font-size: 0.9em;\n}\n\n.intel-status-badge {\n  font-size: 0.7em;\n  padding: 2px 8px;\n  border-radius: 4px;\n  font-weight: bold;\n}\n\n.intel-status-badge.æœªæ¢ç´¢ {\n  color: var(--text-color);\n  background-color: var(--bg-dark);\n}\n\n.intel-status-badge.å·²æ¢ç´¢ {\n  color: var(--bg-dark);\n  background-color: var(--accent-blue);\n}\n\n.intel-status-badge.å·²å®Œæˆ {\n  color: var(--bg-dark);\n  background-color: var(--dialog-color);\n}\n\n.intel-desc {\n  font-size: 0.85em;\n  color: var(--text-color);\n  margin-bottom: 8px;\n  line-height: 1.4;\n}\n\n.intel-meta {\n  display: flex;\n  gap: 12px;\n  font-size: 0.75em;\n}\n\n.intel-value {\n  color: var(--accent-gold);\n}\n\n.intel-risk {\n  color: var(--accent-red);\n}\n</style>\n","<template>\n  <section id=\"shelter-section\" class=\"section\">\n    <h2 class=\"section-title\">ğŸ° åº‡æŠ¤æ‰€ä¿¡æ¯ ğŸ°</h2>\n    <div class=\"shelter-grid\">\n      <div class=\"shelter-item\">\n        <div class=\"label\">âšœï¸ åº‡æŠ¤æ‰€ç­‰çº§</div>\n        <div class=\"value\">{{ store.data.åº‡æŠ¤æ‰€.åº‡æŠ¤æ‰€ç­‰çº§ }}</div>\n      </div>\n      <div class=\"shelter-item\">\n        <div class=\"label\">ğŸ² ä»Šæ—¥æŠ•æ·ç‚¹æ•°</div>\n        <div class=\"value\">{{ store.data.åº‡æŠ¤æ‰€.ä»Šæ—¥æŠ•æ·ç‚¹æ•° }}</div>\n      </div>\n      <div class=\"shelter-item\">\n        <div class=\"label\">â³ è·ç¦»ä¸‹æ¬¡ä¿åº•å‡çº§</div>\n        <div class=\"value\">{{ store.data.åº‡æŠ¤æ‰€.è·ç¦»ä¸Šæ¬¡å‡çº§ }}</div>\n      </div>\n      <div class=\"shelter-item\">\n        <div class=\"label\">ğŸ”’ å¯æ‰©å±•åŒºåŸŸçŠ¶æ€</div>\n        <div class=\"expansion-list\">\n          <div class=\"expansion-card\" :class=\"{ unlocked: store.data.åº‡æŠ¤æ‰€.å¯æ‰©å±•åŒºåŸŸ.åŒ»ç–—ç¿¼ !== 'æœªè§£é”' }\">\n            <div class=\"name\">âš•ï¸ åŒ»ç–—ç¿¼</div>\n            <div class=\"status\">{{ store.data.åº‡æŠ¤æ‰€.å¯æ‰©å±•åŒºåŸŸ.åŒ»ç–—ç¿¼ }}</div>\n          </div>\n          <div class=\"expansion-card\" :class=\"{ unlocked: store.data.åº‡æŠ¤æ‰€.å¯æ‰©å±•åŒºåŸŸ.åˆ¶é€ å·¥åŠ !== 'æœªè§£é”' }\">\n            <div class=\"name\">ğŸ”§ åˆ¶é€ å·¥åŠ</div>\n            <div class=\"status\">{{ store.data.åº‡æŠ¤æ‰€.å¯æ‰©å±•åŒºåŸŸ.åˆ¶é€ å·¥åŠ }}</div>\n          </div>\n          <div class=\"expansion-card\" :class=\"{ unlocked: store.data.åº‡æŠ¤æ‰€.å¯æ‰©å±•åŒºåŸŸ.è½½å…·æ ¼çº³åº“ !== 'æœªè§£é”' }\">\n            <div class=\"name\">ğŸšœ è½½å…·æ ¼çº³åº“</div>\n            <div class=\"status\">{{ store.data.åº‡æŠ¤æ‰€.å¯æ‰©å±•åŒºåŸŸ.è½½å…·æ ¼çº³åº“ }}</div>\n          </div>\n        </div>\n      </div>\n\n      <!-- ä¼Šç”¸ç©ºé—´åœ°å›¾ -->\n      <div class=\"shelter-item\">\n        <div class=\"label\">ğŸ—ºï¸ ä¼Šç”¸ç©ºé—´åœ°å›¾</div>\n        <button class=\"map-toggle-btn\" @click=\"isMapExpanded = !isMapExpanded\">\n          <span class=\"toggle-icon\">{{ isMapExpanded ? 'â–¼' : 'â–¶' }}</span>\n          <span class=\"toggle-text\">{{ isMapExpanded ? 'æ”¶èµ·åœ°å›¾' : 'å±•å¼€åœ°å›¾' }}</span>\n        </button>\n        <button class=\"map-toggle-btn\" :disabled=\"!canOpenScopeEditor\" @click=\"toggleScopeEditor\">\n          <span class=\"toggle-icon\">{{ isScopeEditorOpen ? 'âœ•' : 'â•' }}</span>\n          <span class=\"toggle-text\">\n            ğŸ›¡ï¸ è®¾ç½®åº‡æŠ¤èŒƒå›´ï¼ˆ20å±‚ {{ scope20Count }}/{{ scope20Max }}ï¼Œ19å±‚\n            {{ scope19Max ? `${scope19Count}/${scope19Max}` : 'æœªè§£é”' }}ï¼‰\n          </span>\n        </button>\n        <div v-if=\"canOpenScopeEditor && !isScopeEditorOpen\" class=\"scope-hint\">\n          å½“å‰ç­‰çº§è·å¾—å‡çº§åº‡æŠ¤èŒƒå›´æƒé™ï¼Œç‚¹å‡»æŸ¥çœ‹\n        </div>\n\n        <div v-show=\"isMapExpanded\" class=\"map-container\">\n          <!-- ç„å…³åŒºåŸŸ -->\n          <div class=\"map-zone\">\n            <div class=\"zone-label\">ğŸšª ç„å…³ - å‡€åŒ–åŒº</div>\n            <div class=\"room-grid entrance-grid\">\n              <div class=\"room-cell highlight\">\n                <div class=\"room-number\">ç„å…³</div>\n                <div class=\"room-value\">{{ getEntranceStatus() }}</div>\n                <div class=\"room-resident\">å‡€åŒ–/éš”ç¦»åŒº</div>\n              </div>\n              <div class=\"room-cell\" :class=\"{ occupied: hasTempGuestA }\">\n                <div class=\"room-number\">ä¸´æ—¶å®¢æˆ¿ A</div>\n                <div class=\"room-value\">{{ hasTempGuestA ? 'å·²å…¥ä½' : 'ç©ºç½®' }}</div>\n                <div class=\"room-resident\">{{ getTempGuestNames('A') }}</div>\n              </div>\n              <div class=\"room-cell\" :class=\"{ occupied: hasTempGuestB }\">\n                <div class=\"room-number\">ä¸´æ—¶å®¢æˆ¿ B</div>\n                <div class=\"room-value\">{{ hasTempGuestB ? 'å·²å…¥ä½' : 'ç©ºç½®' }}</div>\n                <div class=\"room-resident\">{{ getTempGuestNames('B') }}</div>\n              </div>\n            </div>\n          </div>\n\n          <!-- æ ¸å¿ƒåŒº -->\n          <div class=\"map-zone\">\n            <div class=\"zone-label\">ğŸ’ æ ¸å¿ƒç”Ÿæ´»åŒº</div>\n            <div class=\"room-grid core-grid\">\n              <div class=\"room-cell highlight\">\n                <div class=\"room-number\">å®¢å…</div>\n                <div class=\"room-value\">å…¬å…±åŒºåŸŸ</div>\n                <div class=\"room-resident\">-</div>\n              </div>\n              <div class=\"room-cell highlight\">\n                <div class=\"room-number\">é¤å…/å¨æˆ¿</div>\n                <div class=\"room-value\">ä¸‡è±¡åˆæˆç»ˆç«¯</div>\n                <div class=\"room-resident\">-</div>\n              </div>\n              <div class=\"room-cell\" :class=\"{ occupied: hasBedroomUser }\">\n                <div class=\"room-number\">ä¸»å§å®¤</div>\n                <div class=\"room-value\">{{ hasBedroomUser ? 'ä½¿ç”¨ä¸­' : 'ç©ºé—²' }}</div>\n                <div class=\"room-resident\">{{ getBedroomUserNames() }}</div>\n              </div>\n              <div class=\"room-cell\" :class=\"{ occupied: hasBathroomUser }\">\n                <div class=\"room-number\">ä¸»æµ´å®¤</div>\n                <div class=\"room-value\">{{ hasBathroomUser ? 'ä½¿ç”¨ä¸­' : 'ç©ºé—²' }}</div>\n                <div class=\"room-resident\">{{ getBathroomUserNames() }}</div>\n              </div>\n            </div>\n          </div>\n\n          <!-- 20å±‚èµ°å»Š -->\n          <div class=\"map-zone\">\n            <div class=\"zone-label\">ğŸ¢ 20å±‚ - å…¬å¯“èµ°å»Š</div>\n            <div class=\"zone-scope-hint\">{{ scope20Hint }}</div>\n            <div class=\"floor-indicator\">â†“ é€šå¾€å¤–éƒ¨æ¥¼æ¢¯</div>\n            <div class=\"room-grid floor-grid\">\n              <div\n                v-for=\"room in floor20Rooms\"\n                :key=\"room.number\"\n                class=\"room-cell\"\n                :class=\"{\n                  'user-room': room.number === '2001',\n                  occupied: hasFloorResident('20', room.number),\n                  sheltered: isFloorRoomSheltered('20', room.number),\n                  'scope-editable': isScopeEditorOpen && canEditFloor('20') && room.number !== '2001',\n                }\"\n                @click=\"onFloorRoomClick('20', room.number)\"\n              >\n                <div\n                  v-if=\"isScopeEditorOpen && canEditFloor('20') && room.number !== '2001'\"\n                  class=\"scope-badge\"\n                  :class=\"{ on: isFloorRoomSheltered('20', room.number) }\"\n                >\n                  ğŸ›¡ï¸\n                </div>\n                <div class=\"room-number\">{{ room.number }}</div>\n                <div class=\"room-value\">{{ getFloorRoomStatus('20', room.number) }}</div>\n                <div class=\"room-resident\">{{ getFloorRoomNames('20', room.number) }}</div>\n              </div>\n            </div>\n          </div>\n\n          <!-- 19å±‚èµ°å»Š -->\n          <div class=\"map-zone\">\n            <div class=\"zone-label\">ğŸ¢ 19å±‚ - å…¬å¯“èµ°å»Š</div>\n            <div class=\"zone-scope-hint\">{{ scope19Hint }}</div>\n            <div class=\"room-grid floor-grid\">\n              <div\n                v-for=\"room in floor19Rooms\"\n                :key=\"room.number\"\n                class=\"room-cell\"\n                :class=\"{\n                  occupied: hasFloorResident('19', room.number),\n                  sheltered: isFloorRoomSheltered('19', room.number),\n                  'scope-editable': isScopeEditorOpen && canEditFloor('19'),\n                }\"\n                @click=\"onFloorRoomClick('19', room.number)\"\n              >\n                <div\n                  v-if=\"isScopeEditorOpen && canEditFloor('19')\"\n                  class=\"scope-badge\"\n                  :class=\"{ on: isFloorRoomSheltered('19', room.number) }\"\n                >\n                  ğŸ›¡ï¸\n                </div>\n                <div class=\"room-number\">{{ room.number }}</div>\n                <div class=\"room-value\">{{ getFloorRoomStatus('19', room.number) }}</div>\n                <div class=\"room-resident\">{{ getFloorRoomNames('19', room.number) }}</div>\n              </div>\n            </div>\n            <div class=\"floor-indicator\">â†“ é€šå¾€18å±‚</div>\n          </div>\n        </div>\n\n        <!-- åº‡æŠ¤èŒƒå›´å¿«é€Ÿè®¾ç½®ï¼šä¸ä¾èµ–åœ°å›¾ç‚¹é€‰ï¼Œé¿å…â€œé€‰å®Œè¿˜è¦æ»šåŠ¨æ‰¾æŒ‰é’®â€ -->\n        <Teleport to=\"body\">\n          <div\n            v-if=\"isScopeEditorOpen\"\n            class=\"scope-modal-mask\"\n            :style=\"scopeModalMaskStyle\"\n            @click.self=\"closeScopeEditor\"\n          >\n            <div class=\"scope-modal\" role=\"dialog\" aria-modal=\"true\">     \n            <div class=\"scope-modal-header\">\n              <div class=\"scope-modal-title\">ğŸ›¡ï¸ è®¾ç½®ç”Ÿå­˜åº‡æŠ¤èŒƒå›´</div>    \n              <button class=\"scope-icon-btn\" type=\"button\" @click=\"closeScopeEditor\" aria-label=\"å…³é—­\">âœ•</button>\n            </div>\n\n            <div class=\"scope-modal-subtitle\">\n              ç‚¹å‡»æˆ¿é—´å¡ç‰‡å³å¯æ·»åŠ /ç§»é™¤ï¼›è®¾ç½®å®Œæˆåç‚¹å‡»â€œç¡®å®šå¹¶å‘é€â€å³å¯åŒæ­¥ç»™ä¼Šç”¸ã€‚\n            </div>\n\n            <div class=\"scope-modal-stats\">\n              <div class=\"stat\">\n                20å±‚ï¼š<span class=\"stat-strong\">{{ scope20Count }}/{{ scope20Max }}</span>\n              </div>\n              <div class=\"stat\">\n                19å±‚ï¼š<span class=\"stat-strong\">{{ scope19Max ? `${scope19Count}/${scope19Max}` : 'æœªè§£é”' }}</span>\n              </div>\n              <button class=\"scope-link-btn\" type=\"button\" @click=\"clearScopeSelection\">æ¸…ç©ºé€‰æ‹©</button>\n            </div>\n\n            <div class=\"scope-modal-body\">\n              <div class=\"scope-floor\">\n                <div class=\"scope-floor-title\">20å±‚ï¼ˆå…¬å¯“èµ°å»Šï¼‰</div>\n                <div class=\"scope-room-grid\">\n                  <button\n                    v-for=\"room in floor20Rooms\"\n                    :key=\"`s20-${room.number}`\"\n                    type=\"button\"\n                    class=\"scope-room-chip\"\n                    :class=\"{\n                      selected: isFloorRoomSheltered('20', room.number),\n                      disabled: !!getToggleRoomDisabledReason('20', room.number),\n                      core: room.number === '2001',\n                    }\"\n                    @click=\"toggleRoomFromSelector('20', room.number)\"\n                  >\n                    <div class=\"chip-top\">\n                      <span class=\"chip-number\">{{ room.number }}</span>\n                      <span class=\"chip-mark\">\n                        {{ isFloorRoomSheltered('20', room.number) ? 'âœ“' : '+' }}\n                      </span>\n                    </div>\n                    <div class=\"chip-sub\">\n                      {{ room.number === '2001' ? 'åº‡æŠ¤æ‰€æœ¬ä½“' : getFloorRoomStatus('20', room.number) }}\n                    </div>\n                  </button>\n                </div>\n              </div>\n\n              <div class=\"scope-floor\" :class=\"{ locked: !scope19Max }\">\n                <div class=\"scope-floor-title\">19å±‚ï¼ˆå…¬å¯“èµ°å»Šï¼‰</div>\n                <div v-if=\"!scope19Max\" class=\"scope-locked-hint\">åº‡æŠ¤æ‰€ç­‰çº§ 6 è§£é”</div>\n                <div class=\"scope-room-grid\" :class=\"{ disabled: !scope19Max }\">\n                  <button\n                    v-for=\"room in floor19Rooms\"\n                    :key=\"`s19-${room.number}`\"\n                    type=\"button\"\n                    class=\"scope-room-chip\"\n                    :class=\"{\n                      selected: isFloorRoomSheltered('19', room.number),\n                      disabled: !!getToggleRoomDisabledReason('19', room.number),\n                    }\"\n                    @click=\"toggleRoomFromSelector('19', room.number)\"\n                  >\n                    <div class=\"chip-top\">\n                      <span class=\"chip-number\">{{ room.number }}</span>\n                      <span class=\"chip-mark\">\n                        {{ isFloorRoomSheltered('19', room.number) ? 'âœ“' : '+' }}\n                      </span>\n                    </div>\n                    <div class=\"chip-sub\">{{ getFloorRoomStatus('19', room.number) }}</div>\n                  </button>\n                </div>\n              </div>\n\n              <details class=\"scope-details\">\n                <summary>é¢„è§ˆå‘é€æ–‡æœ¬ï¼ˆè°ƒè¯•ç”¨ï¼‰</summary>\n                <div v-if=\"scopeInstructionText\" class=\"scope-preview\">\n                  {{ scopeInstructionText }}\n                </div>\n                <div v-else class=\"scope-preview\">(å°šæœªé€‰æ‹©ä»»ä½•æˆ¿é—´)</div>\n              </details>\n            </div>\n\n            <div class=\"scope-modal-footer\">\n              <div class=\"scope-footer-hint\">\n                ç‚¹å‡»\"ç¡®å®šå¹¶å‘é€\"åï¼ŒAIæ­£æ–‡ä¼šè¯†åˆ«æˆ¿é—´çš„åº‡æŠ¤æ•ˆæœï¼›è‹¥åªå‹¾é€‰\"æ¢å¤å¥åº·\"ï¼Œåˆ™ä»…å•çº¯æ¢å¤å¥åº·å€¼ã€‚\n              </div>\n              <div class=\"scope-footer-spacer\"></div>\n              <button class=\"scope-btn\" type=\"button\" @click=\"closeScopeEditor\">å…³é—­</button>\n              <button class=\"scope-btn scope-btn--primary\" type=\"button\" @click=\"confirmAndSendScope\">\n                ç¡®å®šå¹¶å‘é€\n              </button>\n            </div>\n            </div>\n          </div>\n        </Teleport>\n      </div>\n\n      <!-- åº‡æŠ¤æ‰€èƒ½åŠ›åˆ—è¡¨ï¼ˆå¯æŠ˜å ï¼‰ -->\n      <div class=\"shelter-item\">\n        <button class=\"collapse-toggle-btn\" @click=\"isAbilityExpanded = !isAbilityExpanded\">\n          <span class=\"toggle-icon\">{{ isAbilityExpanded ? 'â–¼' : 'â–¶' }}</span>\n          <span class=\"toggle-text\">ğŸ’¡ åº‡æŠ¤æ‰€èƒ½åŠ›åˆ—è¡¨</span>\n        </button>\n        <div v-show=\"isAbilityExpanded\" class=\"ability-list\">\n          <template v-if=\"abilities.length > 0\">\n            <div v-for=\"(ab, idx) in abilities\" :key=\"idx\" class=\"ability-card\">\n              <div class=\"name\">{{ ab.name }}</div>\n              <div class=\"desc\">{{ ab.desc }}</div>\n            </div>\n          </template>\n          <template v-else>(æš‚æ— èƒ½åŠ›)</template>\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, watch, onUnmounted } from 'vue';\nimport { useDataStore } from '../../store';\nimport { useShelterScopeStore } from '../../shelterScopeStore';\nimport { floorRoomCapacity, isRoomSheltered } from '../../../util/shelter_scope';\nimport { copyText, sendToChat } from '../../outbound';\n\nconst store = useDataStore();\nconst scopeStore = useShelterScopeStore();\n// é»˜è®¤æŠ˜å ï¼Œä¿æŒåŸæœ‰äº¤äº’\nconst isMapExpanded = ref(false);\nconst isAbilityExpanded = ref(false);\nconst isScopeEditorOpen = ref(false);\nconst scopeModalViewportTop = ref(0);\nconst scopeModalViewportHeight = ref(0);\nlet parentScrollTarget: HTMLElement | Window | null = null;\n\nconst scopeModalMaskStyle = computed(() => ({\n  top: `${scopeModalViewportTop.value}px`,\n  height: `${scopeModalViewportHeight.value}px`,\n}));\n\nfunction getParentScrollContainer(frameEl: HTMLElement): HTMLElement | Window {\n  try {\n    const doc = frameEl.ownerDocument;\n    const win = doc.defaultView ?? window.parent;\n    let cur: HTMLElement | null = frameEl.parentElement;\n    while (cur) {\n      const style = win.getComputedStyle(cur);\n      const overflowY = style.overflowY;\n      if ((overflowY === 'auto' || overflowY === 'scroll') && cur.scrollHeight > cur.clientHeight + 1) {\n        return cur;\n      }\n      cur = cur.parentElement;\n    }\n    return win;\n  } catch {\n    return window.parent;\n  }\n}\n\nfunction updateScopeModalViewport() {\n  const frameEl = window.frameElement as HTMLElement | null;\n  if (!frameEl) return;\n  const parentWin = window.parent as Window | null;\n  if (!parentWin) return;\n\n  // å…³é”®ï¼šæ¶ˆæ¯ iframe æœ¬èº«é€šå¸¸â€œæ²¡æœ‰å†…éƒ¨æ»šåŠ¨â€ï¼Œå¤–å±‚æ»šåŠ¨å‘ç”Ÿåœ¨çˆ¶çº§å®¹å™¨ã€‚\n  // å›ºå®šå®šä½ä¼šé”šå®šåˆ° iframe é¡¶éƒ¨ï¼Œå¯¼è‡´ç”¨æˆ·åœ¨é•¿æ­£æ–‡ä¸­ç‚¹å¼€å¼¹çª—æ—¶â€œå¼¹çª—è·‘åˆ°å¾ˆè¿œâ€ã€‚\n  // å› æ­¤æˆ‘ä»¬æŠŠ mask æ”¾åˆ°æ–‡æ¡£çš„â€œå½“å‰å¯è§åŒºåŸŸå¯¹åº”çš„ y åæ ‡â€ä¸Šï¼ˆç»å¯¹å®šä½ï¼‰ã€‚\n  const rect = frameEl.getBoundingClientRect(); // ç›¸å¯¹çˆ¶çª—å£ viewport\n  const topInIframeDoc = Math.max(0, -rect.top);\n  scopeModalViewportTop.value = topInIframeDoc;\n  scopeModalViewportHeight.value = Math.max(0, parentWin.innerHeight);\n}\n\nfunction bindParentScrollSync() {\n  const frameEl = window.frameElement as HTMLElement | null;\n  if (!frameEl) return;\n  parentScrollTarget = getParentScrollContainer(frameEl);\n  const handler = updateScopeModalViewport;\n\n  if (parentScrollTarget instanceof Window) {\n    parentScrollTarget.addEventListener('scroll', handler, { passive: true });\n    parentScrollTarget.addEventListener('resize', handler, { passive: true });\n  } else {\n    parentScrollTarget.addEventListener('scroll', handler, { passive: true });\n    window.parent?.addEventListener?.('resize', handler, { passive: true });\n  }\n}\n\nfunction unbindParentScrollSync() {\n  const handler = updateScopeModalViewport;\n  if (parentScrollTarget instanceof Window) {\n    parentScrollTarget.removeEventListener('scroll', handler as any);\n    parentScrollTarget.removeEventListener('resize', handler as any);\n  } else if (parentScrollTarget) {\n    parentScrollTarget.removeEventListener('scroll', handler as any);\n    window.parent?.removeEventListener?.('resize', handler as any);\n  }\n  parentScrollTarget = null;\n}\n\nconst shelterLevel = computed(() => {\n  const lv = Number(store.data.åº‡æŠ¤æ‰€.åº‡æŠ¤æ‰€ç­‰çº§);\n  return Number.isFinite(lv) ? lv : 1;\n});\n\nconst canOpenScopeEditor = computed(() => shelterLevel.value >= 3);\n\nconst scope20Max = computed(() => floorRoomCapacity(shelterLevel.value, '20'));\nconst scope19Max = computed(() => floorRoomCapacity(shelterLevel.value, '19'));\nconst scope20Count = computed(() => (scopeStore.scope['20'] ?? []).length);\nconst scope19Count = computed(() => (scopeStore.scope['19'] ?? []).length);\n\nconst scopeInstructionText = computed(() => scopeStore.buildInstructionText());\n\nfunction buildFloorScopeHint(rooms: string[], max: number, unlockLevel: number): string {\n  if (!max) return `åº‡æŠ¤èŒƒå›´æœªè§£é”ï¼ˆåº‡æŠ¤æ‰€ç­‰çº§${unlockLevel}è§£é”ï¼‰ã€‚å½“å‰å¯ç”¨åº‡æŠ¤ 0/0ã€‚`;\n  const list = rooms.length ? rooms.join('ã€') : 'æ— ';\n  return `ä¼Šç”¸å·²åº‡æŠ¤${list}ã€‚å½“å‰å¯ç”¨åº‡æŠ¤ ${rooms.length}/${max}ã€‚`;\n}\n\nconst scope20Hint = computed(() => buildFloorScopeHint(scopeStore.scope['20'] ?? [], scope20Max.value, 3));\nconst scope19Hint = computed(() => buildFloorScopeHint(scopeStore.scope['19'] ?? [], scope19Max.value, 6));\n\nconst abilities = computed(() => {\n  const raw = store.data.åº‡æŠ¤æ‰€.åº‡æŠ¤æ‰€èƒ½åŠ› as any;\n  if (Array.isArray(raw)) return raw;\n  return Object.entries(raw ?? {}).map(([name, val]) => ({\n    name,\n    desc: (val as any)?.desc ?? '',\n  }));\n});\n\n// 20å±‚æˆ¿é—´æ•°æ®\nconst floor20Rooms = [\n  { number: '2001' },\n  { number: '2002' },\n  { number: '2003' },\n  { number: '2004' },\n  { number: '2005' },\n  { number: '2006' },\n  { number: '2007' },\n  { number: '2008' },\n  { number: '2009' },\n  { number: '2010' },\n  { number: '2011' },\n  { number: '2012' },\n];\n\n// 19å±‚æˆ¿é—´æ•°æ®\nconst floor19Rooms = [\n  { number: '1901' },\n  { number: '1902' },\n  { number: '1903' },\n  { number: '1904' },\n  { number: '1905' },\n  { number: '1906' },\n  { number: '1907' },\n  { number: '1908' },\n  { number: '1909' },\n  { number: '1910' },\n  { number: '1911' },\n  { number: '1912' },\n];\n\nfunction canEditFloor(floor: '20' | '19'): boolean {\n  return scopeStore.canEditFloor(floor, shelterLevel.value);\n}\n\nfunction isFloorRoomSheltered(floor: '20' | '19', roomNumber: string): boolean {\n  if (floor === '20' && roomNumber === '2001') return false;\n  return isRoomSheltered(scopeStore.scope, floor, roomNumber);\n}\n\nfunction toggleScopeEditor() {\n  if (!canOpenScopeEditor.value) {\n    toastr.warning('åº‡æŠ¤èŒƒå›´åŠŸèƒ½åœ¨åº‡æŠ¤æ‰€ç­‰çº§ 3 è§£é”');\n    return;\n  }\n  isScopeEditorOpen.value = !isScopeEditorOpen.value;\n}\n\nfunction closeScopeEditor() {\n  isScopeEditorOpen.value = false;\n}\n\nwatch(isScopeEditorOpen, open => {\n  if (open) {\n    updateScopeModalViewport();\n    bindParentScrollSync();\n    return;\n  }\n  unbindParentScrollSync();\n});\n\nonUnmounted(() => {\n  unbindParentScrollSync();\n});\n\nfunction clearScopeSelection() {\n  const ok = window.confirm('ç¡®å®šæ¸…ç©ºå·²é€‰æ‹©çš„åº‡æŠ¤æˆ¿é—´ï¼Ÿ');\n  if (!ok) return;\n  scopeStore.clearAll();\n  toastr.info('å·²æ¸…ç©º');\n}\n\nfunction getToggleRoomDisabledReason(floor: '20' | '19', roomNumber: string): string | null {\n  if (floor === '20' && roomNumber === '2001') return '2001 ä¸ºåº‡æŠ¤æ‰€æœ¬ä½“ï¼Œæ— éœ€è®¾ç½®åº‡æŠ¤';\n  if (!canEditFloor(floor)) return `å½“å‰ç­‰çº§æœªè§£é”${floor}å±‚åº‡æŠ¤èŒƒå›´`;\n\n  const max = floor === '20' ? scope20Max.value : scope19Max.value;\n  const count = floor === '20' ? scope20Count.value : scope19Count.value;\n  const selected = isFloorRoomSheltered(floor, roomNumber);\n  if (!selected && max > 0 && count >= max) return `è¯¥æ¥¼å±‚åº‡æŠ¤èŒƒå›´å·²è¾¾ä¸Šé™ï¼ˆ${max} é—´ï¼‰`;\n  return null;\n}\n\nfunction toggleRoomFromSelector(floor: '20' | '19', roomNumber: string) {\n  const reason = getToggleRoomDisabledReason(floor, roomNumber);\n  if (reason) {\n    toastr.warning(reason);\n    return;\n  }\n  const res = scopeStore.toggleRoom(floor, roomNumber, shelterLevel.value);\n  if (!res.ok) toastr.warning(res.reason ?? 'æ— æ³•ä¿®æ”¹åº‡æŠ¤èŒƒå›´');\n}\n\nfunction onFloorRoomClick(floor: '20' | '19', roomNumber: string) {\n  if (!isScopeEditorOpen.value) return;\n  if (floor === '20' && roomNumber === '2001') {\n    toastr.info('2001 ä¸ºåº‡æŠ¤æ‰€æœ¬ä½“ï¼Œæ— éœ€è®¾ç½®åº‡æŠ¤');\n    return;\n  }\n  const res = scopeStore.toggleRoom(floor, roomNumber, shelterLevel.value);\n  if (!res.ok) toastr.warning(res.reason ?? 'æ— æ³•ä¿®æ”¹åº‡æŠ¤èŒƒå›´');\n}\n\nasync function copyScopeInstruction() {\n  await copyText(scopeInstructionText.value, { toast: true });\n}\n\nfunction sendScopeInstruction() {\n  sendToChat(scopeInstructionText.value, {\n    toast: true,\n    successMessage: 'å·²å‘é€',\n    failureMessage: 'å‘é€å¤±è´¥ï¼Œè¯·å¤åˆ¶åæ‰‹åŠ¨å‘é€',\n    unavailableMessage: 'æ— æ³•å‘é€ï¼štriggerSlash ä¸å¯ç”¨',\n  });\n}\n\nfunction confirmAndSendScope() {\n  const text = scopeInstructionText.value;\n  if (!text) {\n    toastr.warning('è¯·å…ˆé€‰æ‹©è¦åº‡æŠ¤çš„æˆ¿é—´');\n    return;\n  }\n\n  const res = sendToChat(text, {\n    toast: true,\n    successMessage: 'å·²å‘é€åˆ°èŠå¤©',\n    failureMessage: 'å‘é€å¤±è´¥ï¼Œå·²å°è¯•å¤åˆ¶ï¼Œè¯·æ‰‹åŠ¨å‘é€',\n    unavailableMessage: 'æ— æ³•ç›´æ¥å‘é€ï¼Œå·²å°è¯•å¤åˆ¶ï¼Œè¯·æ‰‹åŠ¨å‘é€',\n  });\n\n  if (res.ok) {\n    closeScopeEditor();\n    return;\n  }\n\n  void copyText(text, { toast: false });\n}\n\n// ç„å…³åŒºåŸŸè®¡ç®—å±æ€§\nconst hasTempGuestA = computed(() => store.data.æˆ¿é—´.ç„å…³.ä¸´æ—¶å®¢æˆ¿Aå…¥ä½è€….length > 0);\n\nconst hasTempGuestB = computed(() => store.data.æˆ¿é—´.ç„å…³.ä¸´æ—¶å®¢æˆ¿Bå…¥ä½è€….length > 0);\n\nfunction getTempGuestNames(room: 'A' | 'B'): string {\n  const names = room === 'A' ? store.data.æˆ¿é—´.ç„å…³.ä¸´æ—¶å®¢æˆ¿Aå…¥ä½è€… : store.data.æˆ¿é—´.ç„å…³.ä¸´æ—¶å®¢æˆ¿Bå…¥ä½è€…;\n  return names.length > 0 ? names.join('ã€') : '-';\n}\n\nfunction getEntranceStatus(): string {\n  // ç„å…³æ€»æ˜¯æ˜¾ç¤º\"å°±ç»ª\"\n  return 'å°±ç»ª';\n}\n\n// æ ¸å¿ƒåŒºè®¡ç®—å±æ€§\nconst hasBedroomUser = computed(() => store.data.æˆ¿é—´.æ ¸å¿ƒåŒº.ä¸»å§å®¤ä½¿ç”¨è€….length > 0);\n\nconst hasBathroomUser = computed(() => store.data.æˆ¿é—´.æ ¸å¿ƒåŒº.ä¸»æµ´å®¤ä½¿ç”¨è€….length > 0);\n\nfunction getBedroomUserNames(): string {\n  const names = store.data.æˆ¿é—´.æ ¸å¿ƒåŒº.ä¸»å§å®¤ä½¿ç”¨è€…;\n  return names.length > 0 ? names.join('ã€') : '-';\n}\n\nfunction getBathroomUserNames(): string {\n  const names = store.data.æˆ¿é—´.æ ¸å¿ƒåŒº.ä¸»æµ´å®¤ä½¿ç”¨è€…;\n  return names.length > 0 ? names.join('ã€') : '-';\n}\n\n// æ¥¼å±‚æˆ¿é—´è¾…åŠ©å‡½æ•°\nfunction getFloorRoomData(floor: string, room: string) {\n  const floorKey = floor === '20' ? 'æ¥¼å±‚20æˆ¿é—´' : 'æ¥¼å±‚19æˆ¿é—´';\n  const rooms = store.data.æˆ¿é—´.æ¥¼å±‚æˆ¿é—´[floorKey as keyof typeof store.data.æˆ¿é—´.æ¥¼å±‚æˆ¿é—´];\n  return rooms?.[room] || { å…¥ä½è€…: [] };\n}\n\nfunction hasFloorResident(floor: string, room: string): boolean {\n  return getFloorRoomData(floor, room).å…¥ä½è€….length > 0;\n}\n\nfunction getFloorRoomStatus(floor: string, room: string): string {\n  const data = getFloorRoomData(floor, room);\n  return data.å…¥ä½è€….length > 0 ? 'å·²å…¥ä½' : 'ç©ºç½®';\n}\n\nfunction getFloorRoomNames(floor: string, room: string): string {\n  const data = getFloorRoomData(floor, room);\n  if (data.å…¥ä½è€….length === 0) return '-';\n\n  // ç‰¹æ®Šæˆ¿é—´æ˜¾ç¤ºå›ºå®šåç§°\n  if (room === '2001') return '{{user}} (ä½ )';\n  if (room === '1901') return 'çˆ±å®«é“ƒ & çˆ±å®«å¿ƒçˆ±';\n\n  return data.å…¥ä½è€….join('ã€');\n}\n</script>\n\n<style scoped>\n.scope-hint {\n  margin: 2px 0 10px;\n  font-size: 0.85em;\n  color: var(--accent-cyan, #00b4d8);\n  opacity: 0.9;\n}\n\n.scope-btn {\n  padding: 8px 10px;\n  border-radius: 8px;\n  border: 1px solid rgba(255, 255, 255, 0.15);\n  background-color: rgba(255, 255, 255, 0.06);\n  color: var(--text-color);\n  cursor: pointer;\n  font-size: 0.9em;\n}\n\n.scope-btn--primary {\n  border-color: rgba(0, 180, 216, 0.55);\n  background-color: rgba(0, 180, 216, 0.18);\n  color: #e8fbff;\n  font-weight: 600;\n}\n\n.scope-btn--ghost {\n  background-color: transparent;\n}\n\n.scope-preview {\n  margin-top: 10px;\n  padding: 10px 12px;\n  border-radius: 8px;\n  background-color: rgba(0, 0, 0, 0.25);\n  color: var(--text-color);\n  font-size: 0.9em;\n  line-height: 1.4;\n  word-break: break-word;\n}\n\n/* --- åº‡æŠ¤èŒƒå›´ï¼šå¿«é€Ÿè®¾ç½®å¼¹çª— --- */\n.scope-modal-mask {\n  position: absolute;\n  left: 0;\n  right: 0;\n  z-index: 50;\n  background: rgba(0, 0, 0, 0.55);\n  padding-top: calc(12px + env(safe-area-inset-top));\n  padding-right: calc(12px + env(safe-area-inset-right));\n  padding-bottom: calc(12px + env(safe-area-inset-bottom));\n  padding-left: calc(12px + env(safe-area-inset-left));\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.scope-modal {\n  width: min(560px, calc(100% - 8px));\n  max-height: calc(100% - 8px);\n  background: rgba(25, 28, 35, 0.98);\n  border: 1px solid rgba(255, 255, 255, 0.12);\n  border-radius: 14px;\n  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.45);\n  display: flex;\n  flex-direction: column;\n}\n\n.scope-modal-header {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  padding: 12px 12px 8px;\n}\n\n.scope-modal-title {\n  font-weight: 700;\n  color: var(--text-strong, #f1fa8c);\n}\n\n.scope-icon-btn {\n  border: 1px solid rgba(255, 255, 255, 0.12);\n  background: rgba(255, 255, 255, 0.06);\n  color: var(--text-color);\n  border-radius: 10px;\n  padding: 6px 10px;\n  cursor: pointer;\n}\n\n.scope-modal-subtitle {\n  padding: 0 12px 8px;\n  font-size: 0.9em;\n  opacity: 0.92;\n}\n\n.scope-modal-stats {\n  display: flex;\n  gap: 10px;\n  padding: 0 12px 10px;\n  flex-wrap: wrap;\n  align-items: center;\n}\n\n.scope-modal-stats .stat {\n  padding: 6px 10px;\n  border-radius: 999px;\n  background: rgba(255, 255, 255, 0.06);\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  font-size: 0.85em;\n}\n\n.stat-strong {\n  color: var(--accent-cyan, #00b4d8);\n  font-weight: 700;\n}\n\n.scope-link-btn {\n  margin-left: auto;\n  border: none;\n  background: transparent;\n  color: var(--accent-cyan, #00b4d8);\n  font-size: 0.85em;\n  cursor: pointer;\n  padding: 6px 8px;\n  opacity: 0.95;\n}\n\n.scope-link-btn:hover {\n  opacity: 1;\n}\n\n.scope-modal-body {\n  padding: 0 12px 12px;\n  overflow-y: auto;\n}\n\n.scope-floor + .scope-floor {\n  margin-top: 14px;\n}\n\n.scope-floor-title {\n  font-weight: 700;\n  margin-bottom: 8px;\n}\n\n.scope-locked-hint {\n  font-size: 0.85em;\n  opacity: 0.8;\n  margin: -4px 0 8px;\n}\n\n.scope-room-grid {\n  display: grid;\n  grid-template-columns: repeat(4, minmax(0, 1fr));\n  gap: 8px;\n}\n\n.scope-room-grid.disabled {\n  opacity: 0.55;\n}\n\n.scope-room-chip {\n  text-align: left;\n  border-radius: 12px;\n  padding: 10px 10px 8px;\n  border: 1px solid rgba(255, 255, 255, 0.12);\n  background: rgba(255, 255, 255, 0.06);\n  color: var(--text-color);\n  cursor: pointer;\n  min-height: 56px;\n}\n\n.scope-room-chip .chip-top {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  gap: 6px;\n}\n\n.scope-room-chip .chip-number {\n  font-weight: 800;\n}\n\n.scope-room-chip .chip-mark {\n  width: 22px;\n  height: 22px;\n  border-radius: 999px;\n  display: inline-flex;\n  align-items: center;\n  justify-content: center;\n  background: rgba(255, 255, 255, 0.08);\n  border: 1px solid rgba(255, 255, 255, 0.12);\n  font-weight: 800;\n  opacity: 0.85;\n}\n\n.scope-room-chip .chip-sub {\n  margin-top: 6px;\n  font-size: 0.8em;\n  opacity: 0.9;\n}\n\n.scope-room-chip.selected {\n  border-color: rgba(241, 250, 140, 0.6);\n  background: radial-gradient(\n    circle at 30% 20%,\n    rgba(241, 250, 140, 0.18),\n    rgba(241, 250, 140, 0.06) 55%,\n    rgba(255, 255, 255, 0.04)\n  );\n}\n\n.scope-room-chip.selected .chip-mark {\n  background: rgba(241, 250, 140, 0.18);\n  border-color: rgba(241, 250, 140, 0.6);\n}\n\n.scope-room-chip.core {\n  border-color: rgba(241, 250, 140, 0.35);\n  background: rgba(241, 250, 140, 0.06);\n}\n\n.scope-room-chip.disabled {\n  opacity: 0.55;\n}\n\n.zone-scope-hint {\n  margin: 6px 0 10px;\n  padding: 6px 10px;\n  border-radius: 10px;\n  border: 1px solid rgba(241, 250, 140, 0.18);\n  background: rgba(241, 250, 140, 0.05);\n  color: rgba(241, 250, 140, 0.92);\n  font-size: 0.8em;\n  line-height: 1.3;\n}\n\n.scope-details {\n  margin-top: 14px;\n  border-top: 1px dashed rgba(255, 255, 255, 0.12);\n  padding-top: 10px;\n}\n\n.scope-details summary {\n  cursor: pointer;\n  opacity: 0.9;\n}\n\n.scope-modal-footer {\n  padding: 10px 12px 12px;\n  border-top: 1px solid rgba(255, 255, 255, 0.1);\n  display: flex;\n  flex-wrap: wrap;\n  gap: 8px;\n  align-items: center;\n}\n\n.scope-footer-hint {\n  flex: 1 1 100%;\n  order: -1;\n  margin-bottom: 4px;\n  padding: 8px 12px;\n  border-radius: 6px;\n  background: linear-gradient(135deg, rgba(255, 180, 80, 0.12), rgba(255, 140, 0, 0.08));\n  border: 1px solid rgba(255, 180, 80, 0.25);\n  font-size: 0.8em;\n  color: rgba(255, 220, 150, 0.95);\n  line-height: 1.4;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n\n.scope-footer-hint::before {\n  content: 'ğŸ’¡';\n  font-size: 1.1em;\n}\n\n.scope-footer-spacer {\n  flex: 1;\n}\n\n.room-cell {\n  position: relative;\n  /* æ™®é€šçŠ¶æ€ï¼šå†·è‰²è°ƒï¼Œæš—ç¤ºæœªå—åº‡æŠ¤ */\n  border: 1px solid rgba(100, 120, 100, 0.3);\n}\n\n.room-cell.scope-editable {\n  cursor: pointer;\n}\n\n/* å—åº‡æŠ¤çŠ¶æ€ï¼šæ©™è‰²/é‡‘è‰²æ¸å˜ï¼Œæš—ç¤ºæ¸©æš–å®‰å…¨ */\n.room-cell.sheltered {\n  border: none;\n  outline: 3px solid rgba(255, 160, 60, 0.9);\n  outline-offset: 1px;\n  box-shadow:\n    0 0 0 1px rgba(255, 180, 80, 0.3),\n    0 0 24px rgba(255, 140, 0, 0.4),\n    0 0 48px rgba(255, 100, 0, 0.2),\n    inset 0 0 30px rgba(255, 200, 100, 0.15);\n  background: radial-gradient(\n    ellipse at center,\n    rgba(255, 200, 100, 0.25) 0%,\n    rgba(255, 180, 80, 0.15) 40%,\n    transparent 70%\n  );\n}\n\n.room-cell.sheltered .room-number {\n  color: #ffb347;\n  font-weight: 700;\n  text-shadow: 0 0 8px rgba(255, 180, 80, 0.6);\n}\n\n.room-cell.sheltered .room-number::after {\n  content: ' ğŸ›¡ï¸';\n  font-size: 0.85em;\n  filter: drop-shadow(0 0 4px rgba(255, 200, 100, 0.8));\n}\n\n.room-cell.sheltered .room-occupants {\n  color: rgba(255, 220, 150, 0.9);\n}\n\n@media (prefers-reduced-motion: no-preference) {\n  .room-cell.sheltered {\n    animation: edenShelterWarmGlow 3s ease-in-out infinite;\n  }\n}\n\n@keyframes edenShelterWarmGlow {\n  0%,\n  100% {\n    box-shadow:\n      0 0 0 1px rgba(255, 180, 80, 0.3),\n      0 0 24px rgba(255, 140, 0, 0.4),\n      0 0 48px rgba(255, 100, 0, 0.2),\n      inset 0 0 30px rgba(255, 200, 100, 0.15);\n  }\n  50% {\n    box-shadow:\n      0 0 0 1px rgba(255, 180, 80, 0.4),\n      0 0 36px rgba(255, 160, 0, 0.5),\n      0 0 60px rgba(255, 120, 0, 0.25),\n      inset 0 0 40px rgba(255, 220, 120, 0.2);\n  }\n}\n\n.scope-badge {\n  position: absolute;\n  top: 6px;\n  right: 6px;\n  font-size: 0.9em;\n  opacity: 0.25;\n  pointer-events: none;\n}\n\n.scope-badge.on {\n  opacity: 1;\n}\n\n@media (max-width: 520px) {\n  .scope-room-grid {\n    grid-template-columns: repeat(3, minmax(0, 1fr));\n  }\n}\n</style>\n","<template>\n  <section class=\"section\">\n    <h2 class=\"section-title\">ğŸ“– æ­£æ–‡å‰§æƒ… ğŸ“–</h2>\n    <div class=\"content-text\">\n      <template v-for=\"seg in segments\" :key=\"seg.key\">\n        <img\n          v-if=\"seg.isImage\"\n          :src=\"seg.imageUrl\"\n          :alt=\"seg.altText\"\n          class=\"story-image\"\n          @load=\"scheduleResize\"\n          @error=\"scheduleResize\"\n        />\n        <table v-else-if=\"seg.isTable\" class=\"markdown-table\">\n          <thead>\n            <tr>\n              <th v-for=\"(header, idx) in seg.tableHeaders\" :key=\"idx\">{{ header }}</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr v-for=\"(row, rowIdx) in seg.tableRows\" :key=\"rowIdx\">\n              <!-- eslint-disable-next-line vue/no-v-html -->\n              <td v-for=\"(cell, cellIdx) in row\" :key=\"cellIdx\" v-html=\"formatTableCell(cell)\"></td>\n            </tr>\n          </tbody>\n        </table>\n        <div v-else-if=\"seg.isSystem\" class=\"system-message\">\n          <pre>{{ seg.text }}</pre>\n        </div>\n        <pre v-else-if=\"seg.className === 'image-prompt'\" class=\"image-prompt\">{{ seg.text }}</pre>\n        <span v-else :class=\"seg.className\">{{ seg.text }}</span>\n      </template>\n    </div>\n  </section>\n</template>\n\n<script setup lang=\"ts\">\ntype Segment = {\n  key: string;\n  text?: string;\n  className?: string;\n  isImage?: boolean;\n  imageUrl?: string;\n  altText?: string;\n  isTable?: boolean;\n  tableHeaders?: string[];\n  tableRows?: string[][];\n  isSystem?: boolean;\n};\n\nconst props = defineProps<{\n  raw: string;\n}>();\n\nconst segments = computed<Segment[]>(() => {\n  const normalizedRaw = normalizeInjectedRaw(props.raw ?? '');\n  const mainText = extractMainStoryText(normalizedRaw);\n  const text = normalizeStoryText(mainText);\n\n  if (!text.trim()) return [{ key: 'empty', text: '(æš‚æ— æ­£æ–‡)' }];\n  const segs = buildSegments(text);\n  return segs.length ? segs : [{ key: 'empty', text: '(æš‚æ— æ­£æ–‡)' }];\n});\n\nlet __resizeScheduled = false;\nfunction scheduleResize() {\n  if (__resizeScheduled) return;\n  __resizeScheduled = true;\n  requestAnimationFrame(() => {\n    __resizeScheduled = false;\n    window.dispatchEvent(new Event('resize'));\n  });\n}\n\nfunction normalizeStoryText(raw: string): string {\n  // 1) éšè—ç»˜å›¾æ€ç»´é“¾\n  // 2) éšè— <image> åŒ…è£¹æ ‡ç­¾ï¼Œä½†ä¿ç•™å…¶ä¸­çš„ image###...### ä¾›ç”Ÿå›¾æ’ä»¶æå–\n  // 3) å½’ä¸€åŒ–ç©ºç™½è¡Œï¼Œå‡å°‘å›¾ç‰‡/æç¤ºè¯å‰åçš„â€œè¢«åŠ¨æ‹‰é«˜â€\n  return raw\n    .replace(/\\r\\n/g, '\\n')\n    .replace(/<imgthink>[\\s\\S]*?<\\/imgthink>/gi, '')\n    .replace(/<\\/?image(?:\\s[^>]*)?>/gi, '')\n    .replace(/\\n{3,}/g, '\\n\\n');\n}\n\ntype TagBlock = {\n  start: number;\n  end: number;\n  openEnd: number;\n  closeStart: number;\n  tagName: 'content' | 'game';\n  inner: string;\n};\n\nfunction findTagBlocks(raw: string): TagBlock[] {\n  const re = /<(content|game)(?:\\s[^>]*)?>([\\s\\S]*?)<\\/\\1>/gi;\n  const blocks: TagBlock[] = [];\n  for (const m of raw.matchAll(re)) {\n    const tagName = (m[1]?.toLowerCase() as 'content' | 'game') ?? 'content';\n    const full = m[0] ?? '';\n    const inner = m[2] ?? '';\n    const start = m.index ?? 0;\n    const end = start + full.length;\n    const openEnd = start + (full.indexOf('>') + 1);\n    const closeStart = end - `</${tagName}>`.length;\n    blocks.push({ start, end, openEnd, closeStart, tagName, inner });\n  }\n  return blocks;\n}\n\nfunction isInAnyRange(pos: number, ranges: Array<{ start: number; end: number }>): boolean {\n  return ranges.some(r => pos >= r.start && pos < r.end);\n}\n\nfunction removeSpans(raw: string, spans: Array<{ start: number; end: number }>): string {\n  if (spans.length === 0) return raw;\n  const sorted = spans\n    .slice()\n    .filter(s => s.end > s.start)\n    .sort((a, b) => a.start - b.start);\n\n  let out = '';\n  let cursor = 0;\n  for (const s of sorted) {\n    if (s.start < cursor) continue;\n    out += raw.slice(cursor, s.start);\n    cursor = s.end;\n  }\n  out += raw.slice(cursor);\n  return out;\n}\n\nfunction extractOptionBlock(raw: string): string {\n  const m = raw.match(/<option(?:\\s[^>]*)?>[\\s\\S]*?<\\/option>/i);\n  return m?.[0] ?? '';\n}\n\nfunction stripOptionBlock(raw: string): string {\n  return raw.replace(/<option(?:\\s[^>]*)?>[\\s\\S]*?<\\/option>/gi, '');\n}\n\nfunction normalizeInjectedRaw(raw: string): string {\n  const input = raw ?? '';\n  if (!input.trim()) return '';\n\n  const blocks = findTagBlocks(input);\n  const ranges = blocks.map(b => ({ start: b.start, end: b.end }));\n\n  // æ”¶é›†å·²åœ¨ <content>/<game> å†…çš„ image###...###ï¼Œç”¨äºå»é‡\n  const promptsInBlocks = new Set<string>();\n  for (const b of blocks) {\n    for (const m of b.inner.matchAll(/image###([\\s\\S]*?)###/g)) promptsInBlocks.add(m[0]);\n  }\n\n  // æ”¶é›†â€œå—å¤–â€çš„ image###...###ï¼Œå¹¶å»é‡\n  const outsideSpans: Array<{ start: number; end: number; raw: string }> = [];\n  const outsidePrompts: string[] = [];\n  for (const m of input.matchAll(/image###([\\s\\S]*?)###/g)) {\n    const start = m.index ?? -1;\n    if (start < 0) continue;\n    const end = start + (m[0]?.length ?? 0);\n    const inBlock = isInAnyRange(start, ranges);\n    if (inBlock) continue;\n\n    const rawPrompt = m[0] ?? '';\n    if (!rawPrompt) continue;\n    if (promptsInBlocks.has(rawPrompt)) continue;\n    if (outsidePrompts.includes(rawPrompt)) continue;\n\n    outsidePrompts.push(rawPrompt);\n    outsideSpans.push({ start, end, raw: rawPrompt });\n  }\n\n  if (outsidePrompts.length === 0) return input;\n\n  const removedOutside = removeSpans(input, outsideSpans);\n  const optionBlock = extractOptionBlock(removedOutside);\n\n  // é‡æ–°æŸ¥æ‰¾å—ï¼ˆå› ä¸º removeSpans ä¼šæ”¹å˜ç´¢å¼•ï¼‰\n  const blocksAfter = findTagBlocks(removedOutside);\n  const lastBlock = blocksAfter.length ? blocksAfter[blocksAfter.length - 1] : null;\n\n  if (lastBlock) {\n    const beforeClose = removedOutside.slice(0, lastBlock.closeStart);\n    const afterClose = removedOutside.slice(lastBlock.closeStart);\n    const injected = `\\n\\n${outsidePrompts.join('\\n')}\\n`;\n    return `${beforeClose}${injected}${afterClose}`;\n  }\n\n  // æ—  <content>/<game>ï¼šåˆ›å»ºåˆæˆ <content>ï¼Œå¹¶æŠŠ option å—ä¿ç•™åœ¨ raw é‡Œä¾›é€‰é¡¹è§£æ\n  const bodyWithoutOption = stripOptionBlock(removedOutside).trim();\n  const synthesized =\n    `<content>\\n` +\n    `${bodyWithoutOption}\\n\\n` +\n    `${outsidePrompts.join('\\n')}\\n` +\n    `</content>\\n` +\n    `${optionBlock ? `\\n${optionBlock}\\n` : ''}`;\n  return synthesized;\n}\n\nfunction extractMainStoryText(raw: string): string {\n  const blocks = findTagBlocks(raw);\n  if (blocks.length) return blocks.map(b => b.inner ?? '').join('\\n');\n  return stripOptionBlock(raw);\n}\n\ntype TableBlock = {\n  start: number;\n  end: number;\n  headers: string[];\n  rows: string[][];\n};\n\nfunction buildSegments(text: string): Segment[] {\n  // ç³»ç»Ÿæ¶ˆæ¯å—ï¼š>>> content <<<ï¼ˆå¯å¸¦ **ï¼‰\n  const systemBlockRe = /\\*{0,2}>>>([\\s\\S]*?)<<<\\*{0,2}/g;\n  // å›¾ç‰‡æç¤ºè¯å—ï¼šimage###prompt###ï¼ˆä¿ç•™ä¾›æ’ä»¶æå–ï¼‰\n  const imagePromptRe = /image###([\\s\\S]*?)###/g;\n  // markdown å›¾ç‰‡ï¼š![](url)\n  const mdImageRe = /!\\[(.*?)\\]\\((.*?)\\)/g;\n  // å•è¡Œç³»ç»Ÿæç¤ºï¼šä¼Šç”¸ï¼š... / ç³»ç»Ÿï¼š... / System: ...\n  const systemLineRe = /^(?:ä¼Šç”¸|ç³»ç»Ÿ|System)[ï¼š:].*$/gm;\n\n  const out: Segment[] = [];\n  let cursor = 0;\n  let segId = 0;\n\n  const pushInline = (chunk: string) => {\n    const normalized = normalizeInlineChunk(chunk);\n    if (!normalized) return;\n    for (const seg of splitInline(normalized, () => `t${segId++}`)) out.push(seg);\n  };\n\n  while (cursor < text.length) {\n    const nextTable = findNextTable(text, cursor);\n    const nextSystemBlock = execFrom(systemBlockRe, text, cursor);\n    const nextImagePrompt = execFrom(imagePromptRe, text, cursor);\n    const nextMdImage = execFrom(mdImageRe, text, cursor);\n    const nextSystemLine = execFrom(systemLineRe, text, cursor);\n\n    const candidates: Array<\n      | { kind: 'table'; start: number; end: number; table: TableBlock }\n      | { kind: 'systemBlock'; start: number; end: number; content: string }\n      | { kind: 'imagePrompt'; start: number; end: number; raw: string }\n      | { kind: 'mdImage'; start: number; end: number; alt: string; url: string }\n      | { kind: 'systemLine'; start: number; end: number; content: string }\n    > = [];\n\n    if (nextTable) candidates.push({ kind: 'table', start: nextTable.start, end: nextTable.end, table: nextTable });\n    if (nextSystemBlock)\n      candidates.push({\n        kind: 'systemBlock',\n        start: nextSystemBlock.index ?? 0,\n        end: (nextSystemBlock.index ?? 0) + nextSystemBlock[0].length,\n        content: nextSystemBlock[1] ?? '',\n      });\n    if (nextImagePrompt)\n      candidates.push({\n        kind: 'imagePrompt',\n        start: nextImagePrompt.index ?? 0,\n        end: (nextImagePrompt.index ?? 0) + nextImagePrompt[0].length,\n        raw: nextImagePrompt[0],\n      });\n    if (nextMdImage)\n      candidates.push({\n        kind: 'mdImage',\n        start: nextMdImage.index ?? 0,\n        end: (nextMdImage.index ?? 0) + nextMdImage[0].length,\n        alt: nextMdImage[1] ?? '',\n        url: nextMdImage[2] ?? '',\n      });\n    if (nextSystemLine)\n      candidates.push({\n        kind: 'systemLine',\n        start: nextSystemLine.index ?? 0,\n        end: (nextSystemLine.index ?? 0) + nextSystemLine[0].length,\n        content: nextSystemLine[0] ?? '',\n      });\n\n    if (candidates.length === 0) {\n      pushInline(text.slice(cursor));\n      break;\n    }\n\n    // é€‰æ‹©æœ€é å‰çš„å—ï¼›åŒä½ç½®æ—¶æŒ‰ä¼˜å…ˆçº§ï¼štable > systemBlock > imagePrompt > mdImage > systemLine\n    const priority: Record<string, number> = { table: 1, systemBlock: 2, imagePrompt: 3, mdImage: 4, systemLine: 5 };\n    candidates.sort((a, b) => (a.start !== b.start ? a.start - b.start : priority[a.kind] - priority[b.kind]));\n    const pick = candidates[0];\n\n    if (pick.start > cursor) {\n      pushInline(text.slice(cursor, pick.start));\n    }\n\n    if (pick.kind === 'table') {\n      out.push({\n        key: `table${segId++}`,\n        isTable: true,\n        tableHeaders: pick.table.headers,\n        tableRows: pick.table.rows,\n      });\n    } else if (pick.kind === 'systemBlock') {\n      out.push({\n        key: `system${segId++}`,\n        isSystem: true,\n        className: 'system-message',\n        text: pick.content.trim(),\n      });\n    } else if (pick.kind === 'imagePrompt') {\n      out.push({\n        key: `imgprompt${segId++}`,\n        className: 'image-prompt',\n        text: pick.raw,\n      });\n    } else if (pick.kind === 'mdImage') {\n      out.push({\n        key: `img${segId++}`,\n        isImage: true,\n        imageUrl: pick.url,\n        altText: pick.alt,\n        text: pick.url,\n      });\n    } else if (pick.kind === 'systemLine') {\n      out.push({\n        key: `system${segId++}`,\n        isSystem: true,\n        className: 'system-message',\n        text: pick.content.trim(),\n      });\n    }\n\n    cursor = Math.max(cursor, pick.end);\n  }\n\n  return out.length ? out : [{ key: 'empty', text: '(æš‚æ— æ­£æ–‡)' }];\n}\n\nfunction normalizeInlineChunk(chunk: string): string {\n  // æ”¶æ•›å—ä¸å—ä¹‹é—´çš„ç©ºç™½ï¼ˆå°¤å…¶æ˜¯ç”Ÿå›¾ç»“æœæ’å…¥åå¸¸å‡ºç°çš„å¤šä½™ç©ºè¡Œï¼‰\n  const normalized = chunk.replace(/[ \\t]+\\n/g, '\\n').replace(/\\n{3,}/g, '\\n\\n');\n  if (!normalized.trim()) return '';\n  return normalized;\n}\n\nfunction execFrom(re: RegExp, text: string, from: number): RegExpExecArray | null {\n  re.lastIndex = from;\n  return re.exec(text);\n}\n\nfunction splitInline(chunk: string, nextKey: () => string): Segment[] {\n  if (!chunk) return [];\n\n  // éœ€æ±‚ï¼šä»…ä¿ç•™ã€ã€‘é«˜äº®ï¼›æ‰€æœ‰ä¸­è‹±æ–‡å¼•å·/å•å¼•å·éƒ½ä½œä¸ºå¯¹è¯é«˜äº®\n  const inlineRe = /ã€[^ã€‘\\n]+ã€‘|â€œ[^â€\\n]+â€|â€˜[^â€™\\n]+â€™|\"[^\"\\n]+\"|'[^'\\n]+'/g;\n  const parts: Segment[] = [];\n  let cursor = 0;\n\n  for (const m of chunk.matchAll(inlineRe)) {\n    const start = m.index ?? 0;\n    const raw = m[0] ?? '';\n    if (start > cursor) {\n      parts.push({ key: nextKey(), text: chunk.slice(cursor, start) });\n    }\n\n    const isBracket = raw.startsWith('ã€');\n    parts.push({ key: nextKey(), text: raw, className: isBracket ? 'inline-bracket' : 'dialog-text' });\n    cursor = start + raw.length;\n  }\n\n  if (cursor < chunk.length) {\n    parts.push({ key: nextKey(), text: chunk.slice(cursor) });\n  }\n\n  return parts;\n}\n\nfunction findNextTable(text: string, from: number): TableBlock | null {\n  // ä» from ä¹‹åçš„ä¸‹ä¸€è¡Œå¼€å§‹æ‰¾ï¼Œé¿å…ä»è¡Œä¸­é—´è¯¯åˆ¤\n  let i = text.lastIndexOf('\\n', Math.max(0, from - 1)) + 1;\n  if (i < from) {\n    const nl = text.indexOf('\\n', from);\n    if (nl === -1) return null;\n    i = nl + 1;\n  }\n\n  while (i < text.length) {\n    const lineEnd = text.indexOf('\\n', i);\n    const end = lineEnd === -1 ? text.length : lineEnd;\n    const line = text.slice(i, end);\n    const trimmed = line.trim();\n\n    if (trimmed.startsWith('|')) {\n      const headerLine = trimmed;\n\n      // ä¸‹ä¸€è¡Œå¿…é¡»æ˜¯åˆ†éš”è¡Œ\n      const nextLineStart = end + 1;\n      if (nextLineStart >= text.length) return null;\n      const nextLineEnd = text.indexOf('\\n', nextLineStart);\n      const nextEnd = nextLineEnd === -1 ? text.length : nextLineEnd;\n      const delimiterLine = text.slice(nextLineStart, nextEnd).trim();\n\n      if (isMarkdownTableDelimiter(delimiterLine)) {\n        const headers = splitMarkdownTableRow(headerLine);\n        const rows: string[][] = [];\n\n        let rowStart = nextEnd + 1;\n        let tableEnd = nextEnd;\n        while (rowStart < text.length) {\n          const rowLineEnd = text.indexOf('\\n', rowStart);\n          const rowEnd = rowLineEnd === -1 ? text.length : rowLineEnd;\n          const rowLine = text.slice(rowStart, rowEnd);\n          const rowTrimmed = rowLine.trim();\n\n          if (!rowTrimmed.startsWith('|')) break;\n\n          const cells = splitMarkdownTableRow(rowTrimmed);\n          rows.push(normalizeRowCells(cells, headers.length));\n          tableEnd = rowEnd;\n          rowStart = rowEnd + 1;\n        }\n\n        if (headers.length >= 2) {\n          return {\n            start: i,\n            end: tableEnd,\n            headers,\n            rows: rows.length ? rows : [normalizeRowCells([], headers.length)],\n          };\n        }\n      }\n    }\n\n    i = end + 1;\n  }\n\n  return null;\n}\n\nfunction isMarkdownTableDelimiter(line: string): boolean {\n  // | --- | :---: | ---: | ç­‰\n  return /^\\s*\\|?\\s*:?-{3,}:?\\s*(\\|\\s*:?-{3,}:?\\s*)+\\|?\\s*$/.test(line);\n}\n\nfunction splitMarkdownTableRow(row: string): string[] {\n  let s = row.trim();\n  if (s.startsWith('|')) s = s.slice(1);\n  if (s.endsWith('|')) s = s.slice(0, -1);\n\n  const cells: string[] = [];\n  let buf = '';\n  let escaped = false;\n\n  for (let idx = 0; idx < s.length; idx++) {\n    const ch = s[idx];\n    if (escaped) {\n      buf += ch;\n      escaped = false;\n      continue;\n    }\n    if (ch === '\\\\') {\n      escaped = true;\n      continue;\n    }\n    if (ch === '|') {\n      cells.push(buf.trim());\n      buf = '';\n      continue;\n    }\n    buf += ch;\n  }\n\n  cells.push(buf.trim());\n  return cells;\n}\n\nfunction normalizeRowCells(cells: string[], width: number): string[] {\n  const out = cells.slice(0, width);\n  while (out.length < width) out.push('');\n  return out;\n}\n\n// æ ¼å¼åŒ–è¡¨æ ¼å•å…ƒæ ¼ï¼ˆæ”¯æŒç²—ä½“ã€æ–œä½“ç­‰ï¼‰- å®‰å…¨å¤„ç†é˜²æ­¢ XSS\nfunction formatTableCell(cell: string): string {\n  // å…ˆè½¬ä¹‰ HTML ç‰¹æ®Šå­—ç¬¦\n  const safe = cell.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n\n  // å†å¤„ç†æ”¯æŒçš„æ ¼å¼\n  return (\n    safe\n      // ä¿®å¤è¢«è½¬ä¹‰çš„ inline-bracket spanï¼ˆè¡¨æ ¼å†…å¸¸è§ï¼‰\n      .replace(/&lt;span class=\"inline-bracket\"&gt;([\\s\\S]*?)&lt;\\/span&gt;/g, '<span class=\"inline-bracket\">$1</span>')\n      // ä¿®å¤è¢«è½¬ä¹‰ä¸º â€œinline-bracket> [xxx]â€ çš„æ®‹ç•™æ–‡æœ¬\n      .replace(/inline-bracket[`'\"]?\\s*&gt;\\s*\\[([^\\]]+)\\]/g, '<span class=\"inline-bracket\">ã€$1ã€‘</span>')\n      .replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>')\n      .replace(/\\*(.*?)\\*/g, '<em>$1</em>')\n      .replace(/ã€([^ã€‘\\n]+)ã€‘/g, '<span class=\"inline-bracket\">ã€$1ã€‘</span>')\n      .replace(/â€œ([^â€\\n]+)â€/g, '<span class=\"dialog-text\">â€œ$1â€</span>')\n      .replace(/â€˜([^â€™\\n]+)â€™/g, '<span class=\"dialog-text\">â€˜$1â€™</span>')\n      .replace(/\"([^\"\\n]+)\"/g, '<span class=\"dialog-text\">\"$1\"</span>')\n      .replace(/'([^'\\n]+)'/g, '<span class=\"dialog-text\">\\'$1\\'</span>')\n  );\n}\n</script>\n\n<style scoped>\n.markdown-table {\n  width: 100%;\n  border-collapse: collapse;\n  margin: 12px 0;\n  font-size: 0.9em;\n  background-color: var(--bg-medium);\n  border-radius: 8px;\n  overflow: hidden;\n}\n\n.markdown-table th,\n.markdown-table td {\n  padding: 10px 12px;\n  text-align: left;\n  border-bottom: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.markdown-table th {\n  background-color: var(--bg-dark);\n  color: var(--accent-gold);\n  font-weight: bold;\n  font-size: 0.85em;\n}\n\n.markdown-table td {\n  color: var(--text-color);\n  line-height: 1.5;\n}\n\n.markdown-table td :deep(strong) {\n  color: var(--text-strong);\n}\n\n.markdown-table td :deep(em) {\n  color: var(--accent-blue);\n}\n\n.markdown-table td :deep(.inline-bracket) {\n  color: var(--accent-blue);\n  font-weight: 600;\n}\n\n.markdown-table tr:last-child td {\n  border-bottom: none;\n}\n\n.markdown-table tbody tr:hover {\n  background-color: rgba(255, 255, 255, 0.03);\n}\n\n/* ç³»ç»Ÿæ¶ˆæ¯æ ·å¼ï¼ˆä¼Šç”¸ï¼šæ¶ˆæ¯ã€>>> æ¶ˆæ¯ <<<ï¼‰ */\n.system-message {\n  background-color: rgba(0, 180, 216, 0.1);\n  border: 1px solid rgba(0, 180, 216, 0.4);\n  border-radius: 8px;\n  padding: 12px 16px;\n  margin: 12px 0;\n  font-family: 'Consolas', 'Monaco', 'Courier New', monospace;\n  font-size: 0.9em;\n  line-height: 1.6;\n  color: var(--accent-cyan, #00b4d8);\n  overflow-x: auto;\n}\n\n.system-message pre {\n  margin: 0;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n}\n\n/* ã€ç³»ç»Ÿã€‘æ¶ˆæ¯æ ·å¼ - é»„è‰² */\n.system-hint {\n  color: var(--accent-gold, #f1fa8c);\n  font-weight: 500;\n}\n\n/* ã€è§’è‰²åã€‘æ ·å¼ - è“è‰²é«˜äº® */\n.character-name {\n  color: var(--accent-blue, #bd93f9);\n  font-weight: 600;\n}\n\n/* å›¾ç‰‡æç¤ºè¯æ ·å¼ - ä»£ç å—å½¢å¼ä¿ç•™ä¾›æ’ä»¶æå– */\n.image-prompt {\n  display: block;\n  background-color: rgba(255, 255, 255, 0.05);\n  border: 1px dashed rgba(255, 255, 255, 0.2);\n  border-radius: 4px;\n  padding: 8px 12px;\n  margin: 8px 0;\n  font-family: 'Consolas', 'Monaco', 'Courier New', monospace;\n  font-size: 0.85em;\n  color: var(--accent-gold);\n  overflow-x: auto;\n}\n\n.inline-bracket {\n  color: var(--accent-blue, #bd93f9);\n  font-weight: 600;\n}\n</style>\n","/* æœ«æ—¥ä¼Šç”¸å›­çŠ¶æ€æ ï¼ˆiframe å‰ç«¯ç•Œé¢ï¼‰å…¨å±€æ ·å¼ */\n:root {\n  --bg-main: #1a1b26;\n  --bg-light: #282a36;\n  --bg-medium: #44475a;\n  --bg-dark: #13141b;\n  --border-color: #8be9fd;\n  --border-shadow-color: #b3f2ff;\n  --text-color: #f8f8f2;\n  --text-strong: #ffffff;\n  --dialog-color: #50fa7b;\n  --thought-color: #ff79c6;\n  --accent-gold: #f1fa8c;\n  --accent-red: #ff5555;\n  --accent-blue: #bd93f9;\n  --accent-cyan: #00b4d8;\n  --health-bar-color: #50fa7b;\n  --border-radius: 12px;\n  --section-gap: 16px;\n  --inner-padding: 18px;\n  --transition-speed: 0.3s;\n  --font-main:\n    'Microsoft YaHei', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n}\n\n:root[data-theme='jade_green'] {\n  --bg-main: #f0f8f8;\n  --bg-light: #ffffff;\n  --bg-medium: #e0f0e0;\n  --bg-dark: #d0e0d0;\n  --border-color: #20b2aa;\n  --border-shadow-color: #a7dbd8;\n  --text-color: #333333;\n  --text-strong: #000000;\n  --dialog-color: #1e90ff;\n  --thought-color: #6a5acd;\n  --accent-gold: #ffa500;\n  --accent-red: #dc143c;\n  --accent-blue: #4682b4;\n  --accent-cyan: #00b4d8;\n  --health-bar-color: #28a745;\n}\n\n:root[data-theme='parchment'] {\n  --bg-main: #efe3c3;\n  --bg-light: #e8d9b0;\n  --bg-medium: #c3a56e;\n  --bg-dark: #6c4a24;\n  --border-color: #8a6642;\n  --border-shadow-color: #5a3a28;\n  --text-color: #3a2d1f;\n  --text-strong: #000000;\n  --dialog-color: #1e3a8a;\n  --thought-color: #8b0000;\n  --accent-gold: #c19a49;\n  --accent-red: #8b3a3a;\n  --accent-blue: #2c4875;\n  --accent-cyan: #008b8b;\n  --health-bar-color: #d2691e;\n}\n\n:root[data-theme='milky'] {\n  --bg-main: #f5f5f5;\n  --bg-medium: #e8e8e8;\n  --bg-light: #ffffff;\n  --bg-dark: #dcdcdc;\n  --border-color: #79a07b;\n  --border-shadow-color: #c0c0c0;\n  --text-color: #4a4a4a;\n  --text-strong: #000000;\n  --dialog-color: #4682b4;\n  --thought-color: #6a5acd;\n  --accent-gold: #d2b48c;\n  --accent-red: #cd5c5c;\n  --accent-blue: #5f9ea0;\n  --accent-cyan: #20b2aa;\n  --health-bar-color: #8fbc8f;\n}\n\n* {\n  box-sizing: border-box;\n}\n\nbody {\n  font-family: var(--font-main);\n  margin: 0;\n  padding: 8px;\n  background-color: transparent;\n  color: var(--text-color);\n  line-height: 1.7;\n}\n\nmain {\n  font-size: var(--font-size-main, 16px);\n  border: 1px solid var(--border-color);\n  box-shadow:\n    0 0 25px 0px var(--border-shadow-color),\n    inset 0 0 15px rgba(255, 255, 255, 0.05);\n  background-color: var(--bg-main);\n  padding: 20px;\n  border-radius: var(--border-radius);\n  max-width: 900px;\n  margin: 10px auto;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n  gap: var(--section-gap);\n}\n\n.section {\n  background-color: var(--bg-light);\n  padding: var(--inner-padding);\n  border-radius: var(--border-radius);\n  border: 1px solid rgba(200, 200, 220, 0.1);\n  position: relative;\n}\n\n.section-title {\n  font-size: 1.25em;\n  font-weight: bold;\n  color: var(--text-strong);\n  text-align: center;\n  margin: 0 0 16px 0;\n  border-bottom: 2px solid var(--border-color);\n  padding-bottom: 10px;\n}\n\n.choices-title {\n  text-align: left;\n  border-bottom: none;\n  padding-bottom: 0;\n}\n\n.global-info-bar {\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  gap: 8px;\n}\n\n.info-item {\n  padding: 4px 10px;\n  border-radius: 8px;\n  background-color: var(--bg-medium);\n  font-size: 0.9em;\n  width: 100%;\n  white-space: normal;\n}\n\n.info-item--location {\n  color: var(--accent-blue);\n}\n\n.info-item--date {\n  color: var(--accent-gold);\n}\n\n.info-item--time {\n  color: var(--accent-red);\n}\n\n.content-text {\n  white-space: pre-line;\n  word-break: break-word;\n}\n\n.dialog-text {\n  color: var(--dialog-color);\n  font-weight: 500;\n}\n\n.thought-text {\n  color: var(--thought-color);\n  font-style: italic;\n}\n\n.system-text {\n  color: var(--accent-gold);\n  font-weight: bold;\n  text-shadow: 0 0 5px rgba(241, 250, 140, 0.3);\n  display: inline-block;\n  margin: 4px 0;\n}\n\n.eden-text {\n  color: #00ffff; /* èµ›åšé’ */\n  font-family: 'Courier New', monospace;\n  background: rgba(0, 255, 255, 0.1);\n  padding: 2px 6px;\n  border-radius: 4px;\n  border-left: 2px solid #00ffff;\n  display: block; /* ç‹¬å ä¸€è¡Œ */\n  margin: 6px 0;\n}\n\n.story-image {\n  max-width: 100%;\n  height: auto;\n  border-radius: 8px;\n  margin: 10px 0;\n  display: block;\n  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);\n}\n\n.shelter-grid {\n  display: grid;\n  grid-template-columns: 1fr;\n  gap: 12px;\n}\n\n.shelter-item .label {\n  font-size: 0.9em;\n  color: var(--text-color);\n  opacity: 0.8;\n  margin-bottom: 6px;\n}\n\n.shelter-item .value {\n  font-size: 1.05em;\n  color: var(--text-strong);\n  white-space: pre-line;\n  word-break: break-word;\n}\n\n.ability-list {\n  max-height: 280px;\n  overflow-y: auto;\n  padding: 10px;\n  background-color: var(--bg-dark);\n  border-radius: 8px;\n}\n\n.ability-card {\n  background-color: var(--bg-medium);\n  padding: 12px;\n  border-radius: 6px;\n  margin-bottom: 8px;\n}\n\n.ability-card .name {\n  font-weight: bold;\n  color: var(--border-color);\n  margin-bottom: 4px;\n}\n\n.ability-card .desc {\n  font-size: 0.85em;\n  opacity: 0.9;\n  line-height: 1.4;\n  white-space: pre-line;\n}\n\n.status-tabs-container {\n  background-color: var(--bg-main);\n  border-radius: var(--border-radius);\n  padding: 10px;\n}\n\n.tab-buttons {\n  display: flex;\n  flex-wrap: nowrap;\n  gap: 8px;\n  margin-bottom: 10px;\n  overflow-x: auto;\n  padding-bottom: 8px;\n}\n\n.tab-button {\n  background-color: var(--bg-medium);\n  color: var(--text-color);\n  padding: 8px 12px;\n  border-radius: 8px;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n  cursor: pointer;\n  font-size: 0.9em;\n  white-space: nowrap;\n  transition: all var(--transition-speed);\n}\n\n.tab-button:hover {\n  background-color: var(--border-color);\n  color: var(--bg-dark);\n}\n\n.tab-button.active {\n  background-color: var(--border-color);\n  color: var(--bg-dark);\n  font-weight: bold;\n  box-shadow: 0 0 10px rgba(139, 233, 253, 0.4);\n}\n\n.tab-content {\n  display: none;\n  animation: fadeEffect var(--transition-speed);\n}\n\n.tab-content.active {\n  display: block;\n}\n\n@keyframes fadeEffect {\n  from {\n    opacity: 0;\n  }\n\n  to {\n    opacity: 1;\n  }\n}\n\n.status-grid {\n  display: flex;\n  flex-direction: column;\n  gap: 14px;\n}\n\n.status-item {\n  background-color: var(--bg-light);\n  padding: 12px;\n  border-radius: 10px;\n  border: 1px solid rgba(255, 255, 255, 0.05);\n}\n\n.status-item .label {\n  font-weight: bold;\n  color: var(--accent-blue);\n  margin-bottom: 6px;\n  font-size: 0.95em;\n}\n\n.status-item .value {\n  color: var(--text-strong);\n  white-space: pre-line;\n  word-break: break-word;\n}\n\n.health-section-header {\n  display: flex;\n  align-items: baseline;\n  justify-content: space-between;\n  gap: 10px;\n}\n\n.health-status-subtext {\n  font-size: 0.85em;\n  opacity: 0.85;\n  margin: 4px 0 10px 0;\n  color: var(--accent-gold);\n}\n\n.value-subtext {\n  font-size: 0.85em;\n  opacity: 0.9;\n  margin-top: 8px;\n  color: var(--accent-red);\n  white-space: pre-line;\n}\n\n.progress-bar-container {\n  width: 100%;\n  height: 12px;\n  background-color: var(--bg-dark);\n  border-radius: 6px;\n  overflow: hidden;\n  border: 1px solid rgba(255, 255, 255, 0.1);\n}\n\n.progress-bar-value {\n  height: 100%;\n  width: 0%;\n  background-color: var(--health-bar-color);\n  border-radius: 6px;\n  transition: width var(--transition-speed);\n}\n\n.details-grid {\n  display: grid;\n  grid-template-columns: 1fr 1fr;\n  gap: 12px;\n}\n\n.other-residents-item {\n  padding: 10px;\n  border-radius: 8px;\n  background-color: var(--bg-medium);\n  margin-bottom: 10px;\n}\n\n.other-residents-item .label {\n  font-weight: bold;\n  color: var(--accent-blue);\n  margin-bottom: 4px;\n}\n\n.other-residents-item .value {\n  white-space: pre-line;\n  word-break: break-word;\n}\n\n.choice-item {\n  width: 100%;\n  text-align: left;\n  background-color: var(--bg-medium);\n  padding: 10px;\n  border-radius: 8px;\n  margin-bottom: 8px;\n  cursor: pointer;\n  transition: all var(--transition-speed);\n  border: 0;\n  color: inherit;\n  font: inherit;\n}\n\n.choice-item:hover {\n  background-color: var(--border-color);\n  color: var(--bg-dark);\n}\n\n.palette-button {\n  position: absolute;\n  top: 16px;\n  right: 16px;\n  width: 38px;\n  height: 38px;\n  border-radius: 50%;\n  border: 1px solid var(--border-color);\n  background: var(--bg-medium);\n  color: var(--text-color);\n  cursor: pointer;\n  font-size: 18px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  transition: all var(--transition-speed);\n}\n\n.palette-button:hover {\n  background: var(--border-color);\n  color: var(--bg-dark);\n}\n\n.palette-modal {\n  position: absolute;\n  top: 60px;\n  right: 16px;\n  width: 260px;\n  background: var(--bg-light);\n  border: 1px solid var(--border-color);\n  border-radius: 10px;\n  box-shadow: 0 0 20px rgba(0, 0, 0, 0.4);\n  padding: 14px;\n  display: none;\n  z-index: 50;\n}\n\n.palette-modal.show {\n  display: block;\n}\n\n.palette-modal h3 {\n  margin: 0 0 10px 0;\n  font-size: 1em;\n  color: var(--text-strong);\n}\n\n.palette-option {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 10px;\n}\n\n.palette-option label {\n  font-size: 0.85em;\n  color: var(--text-color);\n}\n\n.palette-option select {\n  width: 120px;\n  padding: 4px;\n  border-radius: 6px;\n  border: 1px solid rgba(255, 255, 255, 0.15);\n  background: var(--bg-medium);\n  color: var(--text-color);\n}\n\n.palette-buttons {\n  display: flex;\n  justify-content: flex-end;\n}\n\n.palette-buttons button {\n  padding: 6px 10px;\n  border-radius: 8px;\n  border: none;\n  background: var(--border-color);\n  color: var(--bg-dark);\n  cursor: pointer;\n  font-weight: bold;\n}\n\n.palette-buttons button:hover {\n  background: var(--border-shadow-color);\n}\n\n.ability-list::-webkit-scrollbar {\n  width: 8px;\n}\n\n.ability-list::-webkit-scrollbar-track {\n  background: var(--bg-dark);\n  border-radius: 4px;\n}\n\n.ability-list::-webkit-scrollbar-thumb {\n  background-color: var(--border-color);\n  border-radius: 4px;\n  border: 2px solid var(--bg-dark);\n}\n\n.ability-list::-webkit-scrollbar-thumb:hover {\n  background-color: var(--border-shadow-color);\n}\n\n.expansion-list {\n  display: grid;\n  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));\n  gap: 8px;\n  margin-top: 8px;\n}\n\n.expansion-card {\n  background-color: var(--bg-dark);\n  padding: 10px;\n  border-radius: 8px;\n  text-align: center;\n  border: 1px solid rgba(255, 255, 255, 0.05);\n  opacity: 0.5;\n  transition: all var(--transition-speed);\n}\n\n.expansion-card.unlocked {\n  opacity: 1;\n  border-color: var(--border-color);\n  box-shadow: 0 0 10px rgba(139, 233, 253, 0.1);\n  background-color: var(--bg-medium);\n}\n\n.expansion-card .name {\n  font-size: 0.9em;\n  font-weight: bold;\n  color: var(--text-color);\n  margin-bottom: 4px;\n}\n\n.expansion-card.unlocked .name {\n  color: var(--accent-gold);\n}\n\n.expansion-card .status {\n  font-size: 0.8em;\n  color: var(--accent-red);\n}\n\n.expansion-card.unlocked .status {\n  color: var(--dialog-color);\n}\n\n@media (max-width: 600px) {\n  .details-grid {\n    grid-template-columns: 1fr;\n  }\n\n  main {\n    padding: 12px;\n    margin: 5px auto;\n    font-size: var(--font-size-main, 14px);\n  }\n\n  .tab-button {\n    padding: 6px 10px;\n    font-size: 0.85em;\n  }\n}\n\n/* ===== æŠ˜å æŒ‰é’®æ ·å¼ ===== */\n.map-toggle-btn,\n.collapse-toggle-btn {\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  width: 100%;\n  padding: 10px 14px;\n  background-color: var(--bg-medium);\n  border: 1px solid var(--border-color);\n  border-radius: 8px;\n  color: var(--text-color);\n  cursor: pointer;\n  font-size: 0.95em;\n  transition: all var(--transition-speed);\n  margin-bottom: 8px;\n}\n\n.map-toggle-btn:hover,\n.collapse-toggle-btn:hover {\n  background-color: var(--border-color);\n  color: var(--bg-dark);\n}\n\n.toggle-icon {\n  font-size: 0.8em;\n  transition: transform var(--transition-speed);\n}\n\n.toggle-text {\n  flex: 1;\n  text-align: left;\n}\n\n.map-container {\n  animation: slideDown var(--transition-speed);\n}\n\n@keyframes slideDown {\n  from {\n    opacity: 0;\n    transform: translateY(-10px);\n  }\n  to {\n    opacity: 1;\n    transform: translateY(0);\n  }\n}\n\n.map-zone {\n  margin-bottom: 16px;\n  padding: 12px;\n  background-color: var(--bg-dark);\n  border-radius: 10px;\n  border: 1px solid rgba(255, 255, 255, 0.05);\n}\n\n.zone-label {\n  font-weight: bold;\n  color: var(--accent-gold);\n  margin-bottom: 10px;\n  font-size: 0.95em;\n  display: flex;\n  align-items: center;\n  gap: 6px;\n}\n\n.floor-indicator {\n  text-align: center;\n  font-size: 0.8em;\n  color: var(--text-color);\n  opacity: 0.6;\n  margin: 8px 0;\n  padding: 4px;\n  border-top: 1px dashed rgba(255, 255, 255, 0.1);\n  border-bottom: 1px dashed rgba(255, 255, 255, 0.1);\n}\n\n.room-grid {\n  display: grid;\n  gap: 6px;\n}\n\n.entrance-grid {\n  grid-template-columns: repeat(3, 1fr);\n}\n\n.core-grid {\n  grid-template-columns: repeat(2, 1fr);\n}\n\n.floor-grid {\n  grid-template-columns: repeat(6, 1fr);\n}\n\n.expansion-grid {\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  gap: 8px;\n}\n\n.room-cell {\n  background-color: var(--bg-medium);\n  padding: 8px 6px;\n  border-radius: 6px;\n  text-align: center;\n  border: 1px solid rgba(255, 255, 255, 0.05);\n  transition: all var(--transition-speed);\n  min-height: 56px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n}\n\n.room-cell:hover {\n  border-color: var(--border-color);\n  box-shadow: 0 0 8px rgba(139, 233, 253, 0.2);\n}\n\n.room-cell.highlight {\n  background-color: var(--bg-light);\n  border-color: var(--border-color);\n  box-shadow: 0 0 10px rgba(139, 233, 253, 0.15);\n}\n\n.room-cell.user-room {\n  border-color: var(--accent-gold);\n  background-color: rgba(241, 250, 140, 0.1);\n}\n\n.room-cell.user-room .room-number {\n  color: var(--accent-gold);\n}\n\n.room-cell.occupied {\n  border-color: var(--dialog-color);\n  background-color: rgba(80, 250, 123, 0.08);\n}\n\n.room-cell.occupied .room-value {\n  color: var(--dialog-color);\n}\n\n.room-number {\n  font-size: 0.8em;\n  font-weight: bold;\n  color: var(--text-strong);\n  margin-bottom: 4px;\n}\n\n.room-value {\n  font-size: 0.75em;\n  color: var(--accent-blue);\n  margin-bottom: 2px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.room-resident {\n  font-size: 0.7em;\n  color: var(--text-color);\n  opacity: 0.8;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.expansion-cell {\n  background-color: var(--bg-medium);\n  padding: 10px 8px;\n  border-radius: 8px;\n  text-align: center;\n  border: 1px dashed rgba(255, 255, 255, 0.1);\n  opacity: 0.5;\n  transition: all var(--transition-speed);\n}\n\n.expansion-cell.unlocked {\n  opacity: 1;\n  border-style: solid;\n  border-color: var(--border-color);\n  background-color: var(--bg-light);\n}\n\n.expansion-icon {\n  font-size: 1.4em;\n  margin-bottom: 4px;\n}\n\n.expansion-name {\n  font-size: 0.85em;\n  font-weight: bold;\n  color: var(--text-color);\n  margin-bottom: 4px;\n}\n\n.expansion-status {\n  font-size: 0.7em;\n  color: var(--accent-red);\n}\n\n.expansion-cell.unlocked .expansion-status {\n  color: var(--dialog-color);\n}\n\n/* å“åº”å¼è°ƒæ•´ */\n@media (max-width: 600px) {\n  .entrance-grid {\n    grid-template-columns: repeat(3, 1fr);\n  }\n\n  .core-grid {\n    grid-template-columns: repeat(2, 1fr);\n  }\n\n  .floor-grid {\n    grid-template-columns: repeat(4, 1fr);\n  }\n\n  .expansion-grid {\n    grid-template-columns: repeat(3, 1fr);\n  }\n\n  .room-cell {\n    min-height: 48px;\n    padding: 6px 4px;\n  }\n\n  .room-number {\n    font-size: 0.75em;\n  }\n\n  .room-resident {\n    font-size: 0.65em;\n  }\n}\n\n@media (max-width: 400px) {\n  .floor-grid {\n    grid-template-columns: repeat(3, 1fr);\n  }\n\n  .expansion-grid {\n    grid-template-columns: repeat(2, 1fr);\n  }\n}\n"],"names":[],"ignoreList":[],"sourceRoot":""}